<!DOCTYPE html> <html lang="zh-CN" dir="ltr"> <head> <meta charset="UTF-8"> <!-- SEO --> <title>GPT用于复杂代码生产所需要满足的必要条件 - Nop</title> <meta property="og:title" content="GPT用于复杂代码生产所需要满足的必要条件"> <meta name="description" content="现在很多人都在尝试用GPT直接生成代码，试图通过自然语言指导GPT完成传统的编码工作。但是，几乎没有人去真正认真的考虑一下生成的代码如何长期维护的问题。"> <meta property="og:description" content="现在很多人都在尝试用GPT直接生成代码，试图通过自然语言指导GPT完成传统的编码工作。但是，几乎没有人去真正认真的考虑一下生成的代码如何长期维护的问题。"> <meta name="keywords" content="Nop,Nop平台,Nop 平台,Nop Platform,Nop社区,Nop 社区,Nop Community,可逆计算,软件构造理论,低代码,lowcode,low-code,low code,低代码平台,lcdp,软件工程"> <link rel="canonical" href="https://nop-platform.gitee.io/projects/nop-entropy/docs/theory/nop-for-gpt/"> <meta property="og:url" content="https://nop-platform.gitee.io/projects/nop-entropy/docs/theory/nop-for-gpt/"> <meta property="og:site_name" content="Nop"> <script type="application/ld+json"> { "@context" : "http://schema.org", "@type" : "WebSite", "name" : "Nop", "url" : "https://nop-platform.gitee.io" } </script> <meta property="og:type" content="article"> <meta property="article:published_time" content="2024-04-04T09:51:04+08:00"> <link rel="next" href="https://nop-platform.gitee.io/projects/nop-entropy/docs/theory/paxos/" title="Paxos的魔法学研究报告"> <link rel="prev" href="https://nop-platform.gitee.io/projects/nop-entropy/docs/theory/methodology-of-reversible-computation/" title="可逆计算理论"> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "NewsArticle", "headline": "GPT用于复杂代码生产所需要满足的必要条件", "image": null, "datePublished": "2024-04-04T09:51:04+08:00", "description": "现在很多人都在尝试用GPT直接生成代码，试图通过自然语言指导GPT完成传统的编码工作。但是，几乎没有人去真正认真的考虑一下生成的代码如何长期维护的问题。" } </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Organization", "url": "https://nop-platform.gitee.io", "logo": "https://nop-platform.gitee.io/assets/logo-9952a8b58c6582fc86a9608db8113158fb31de7a9db19d4358ac7cb96578d34e.png" } </script> <link rel="author" href="https://nop-platform.gitee.io"> <!-- 页面渲染兼容性 --> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="renderer" content="webkit"> <meta name="viewport" content="width=device-width,initial-scale=1.0"> <meta name="theme-color" content="#0871ab"> <link rel="icon" href="/assets/logo-9952a8b58c6582fc86a9608db8113158fb31de7a9db19d4358ac7cb96578d34e.png"> <!-- 静态资源 --> <link type="text/css" rel="stylesheet" href="/assets/global-f979fafa22c865e727cd15f83cdc43dbc73c1a324d7ad4fe6fa48e275dc4c063.css"> <link type="text/css" rel="stylesheet" href="/assets/ksio/vendors/share-c2e41222f5f34b2de38cb5213fa0e439c11da73b3907b444a32635563ae85ffd.css"> <link type="text/css" rel="stylesheet" href="/assets/local/layouts/doc-c5c0ab8b12485893472e680b5f067b74e240481232265b6cb0ab6edc95c20f65.css"> <script type="text/javascript" src="/assets/global-b3a80dd53acf48ad7228d6fd741dba15d3845cbc3783bdbbf7244151a45628aa.js"></script> <!--[if lt IE 9]> <script type="text/javascript" src="/assets/ksio/support_ie8-e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.js"></script> <![endif]--> </head> <body class="Page" itemscope itemtype="http://schema.org/WebPage"> <header class="Page-header"> <div class="navbar navbar-static-top"> <div class="container-fluid"> <div class="navbar-header"> <button class="navbar-toggle collapsed" type="button" data-target=".Page-navs" data-toggle="collapse"> <span class="sr-only">Toggle navs</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/">Nop</a> </div> <!-- Nav menus --> <nav class="Page-navs navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <li class="dropdown"> <a class="dropdown-toggle" href="javascript:void(0);" data-toggle="dropdown">学习 <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="/projects/nop-entropy/docs/">指南</a> </li> <li><a href="https://www.zhihu.com/column/reversible-computation?utm_source=https://nop-platform.gitee.io&utm_medium=common-header" target="_blank" rel="external nofollow">文章</a> </li> <li><a href="https://space.bilibili.com/3493261219990250?utm_source=https://nop-platform.gitee.io&utm_medium=common-header" target="_blank" rel="external nofollow">视频</a> </li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" href="javascript:void(0);" data-toggle="dropdown">项目 <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="/projects/nop-entropy/">Nop Entropy</a> </li> <li><a href="/projects/nop-chaos/">Nop Chaos</a> </li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" href="javascript:void(0);" data-toggle="dropdown">关于 <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="/community/">社区</a> </li> <li><a href="/team/">团队</a> </li> <li><a href="https://gitee.com/nop-platform?utm_source=https://nop-platform.gitee.io&utm_medium=common-header" target="_blank" rel="external nofollow">Gitee 组织</a> </li> </ul> </li> <li><a href="https://nop-platform.github.io?utm_source=https://nop-platform.gitee.io&utm_medium=common-header" target="_blank" rel="external nofollow">English</a> </li> </ul> </nav> </div> </div> </header> <div class="Page-content"> <aside class="Page-aside"> <div class="AsideBrand"> <a href="/">Nop</a> </div> <nav class="AsideNav"><ul> <li> <a href="/projects/nop-entropy/docs/">概览</a> </li> <li> <a href="/projects/nop-entropy/docs/core-code-guidance/">Nop平台核心代码阅读导引</a> </li> <li> <a href="/projects/nop-entropy/docs/why-nop/">Nop平台的定位和发展规划</a> </li> <li> <span>arch</span> <ul> <li> <a href="/projects/nop-entropy/docs/arch/">架构</a> </li> <li> <a href="/projects/nop-entropy/docs/arch/module-dependency/">模块依赖关系</a> </li> </ul> </li> <li> <span>compare</span> <ul> <li> <a href="/projects/nop-entropy/docs/compare/nop-vs-skyve/">从可逆计算看开源低代码平台Skyve的设计</a> </li> <li> <a href="/projects/nop-entropy/docs/compare/nop-vs-springcloud/">Nop平台与SpringCloud的功能对比</a> </li> </ul> </li> <li> <span>dev-guide</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/">开发指南</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/autotest/">自动测试</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/cli/">NopCli命令行工具</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/codegen/">Maven集成代码生成器</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/config/">配置规范</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/customization/">Delta定制</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/debug/">开发调试</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/delta-loader/">[虚拟文件系统](vfs/vfs.md)</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/dict/">字典表翻译</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/error-code/">统一响应格式</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/i18n/">dev-guide/i18n.md</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/intro/">dev-guide/intro.md</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/ioc/">3.1 XDef元模型定义</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/quarkus/">日志配置</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/spring/">Spring集成</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/tenant/">租户配置</a> </li> <li> <span>dev-guide/auth</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/auth/auth/">权限</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/auth/impersonate/">替代登录</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/auth/login/">登录逻辑</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/auth/service-auth/">服务鉴权</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/auth/sso/">启用SSO支持</a> </li> </ul> </li> <li> <span>dev-guide/batch</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/batch/batch-design/">SpringBatch存在的设计问题</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/batch/batch-gen/">dev-guide/batch/batch-gen.md</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/batch/batch-task/">dev-guide/batch/batch-task.md</a> </li> </ul> </li> <li> <span>dev-guide/biz</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/biz/coderule/">编码规则</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/biz/validate/">CrudBizModel中的自动验证</a> </li> </ul> </li> <li> <span>dev-guide/command</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/command/command/">命令行程序支持</a> </li> </ul> </li> <li> <span>dev-guide/delta</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/delta/delta-customization/">如何在不修改基础产品源码的情况下实现定制化开发</a> </li> </ul> </li> <li> <span>dev-guide/graphql</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/graphql/connection/">connection配置</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/graphql/crud/">标准增删改查操作</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/graphql/graphql-java/">面向对象的GraphQL</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/graphql/left-join/">通过QueryBean实现左连接查询</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/graphql/rest/">REST链接</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/graphql/upload/">GraphQL引擎的上传下载扩展</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/graphql/xbiz/">Biz模型</a> </li> </ul> </li> <li> <span>dev-guide/ide</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/ide/idea/">安装JDK</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/ide/plugin-dev/">关联Gradle工程</a> </li> </ul> </li> <li> <span>dev-guide/ioc</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/ioc/aop/">编译期代码生成</a> </li> </ul> </li> <li> <span>dev-guide/job</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/job/job-design/">分布式任务调度</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/job/job/">dev-guide/job/job.md</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/job/trigger/">dev-guide/job/trigger.md</a> </li> </ul> </li> <li> <span>dev-guide/microservice</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/microservice/feign/">Feign集成</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/microservice/grpc/">NopGraphQL对外暴露为Grpc</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/microservice/rpc-design/">低代码平台中的分布式RPC框架(约3000行代码)</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/microservice/rpc/">一. 服务端配置</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/microservice/web-filter/">配置项</a> </li> </ul> </li> <li> <span>dev-guide/model</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/model/">Excel模型</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/model/api-model/">Api模型</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/model/core-models/">核心模型说明</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/model/custom-model/">自定义模型</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/model/excel-model/">Excel数据模型</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/model/excel-xlsx/">1. 解析Excel文件得到Workbook对象</a> </li> </ul> </li> <li> <span>dev-guide/nocode</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/nocode/">在线配置数据模型和服务模型: [dyn-model.md](dyn-model.md)</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/nocode/dyn-model/">在线动态建模</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/nocode/dynamic-orm/">内置工作流支持的动态实体</a> </li> </ul> </li> <li> <span>dev-guide/orm</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/">[数据库方言](dialect.md)</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/dao-lib/">在标签库中直接执行SQL语句</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/dao/">基本约定</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/data-change-log/">实体修改状态跟踪</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/dialect/">Dialect的继承和定制</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/dql/">dev-guide/orm/dql.md</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/eql/">EQL对象查询语言</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/ext-field/">如何在不改表的情况下为实体增加扩展字段</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/field-masking/">字段掩码</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/many-to-many/">多对多关联</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/multi-datasource/">多数据源配置</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/multi-db/">多数据源配置</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/null-value/">空值的处理</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/orm-basic/">基本使用方式</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/orm/">执行原理</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/session-cache/">一级缓存</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/sql-lib/">1 统一管理SQL/EQL/DQL</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/tcc/">分布式事务</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/to-one-relation/">多对一或者一对一关联</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/transaction/">事务模板</a> </li> </ul> </li> <li> <span>dev-guide/recipe</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/recipe/">1. [在后台增加字段](add-field.md)</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/recipe/add-field/">在后台Graph中增加字段</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/recipe/crud/">1. 传递一些实体上没有的字段到后台</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/recipe/filter-list/">1. 表格过滤</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/recipe/json-helper/">JSON处理</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/recipe/tree-entity/">1. 如何取出当前节点的所有兄弟节点，以及所有父节点</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/recipe/xml-helper/">1. 解析XML文本</a> </li> </ul> </li> <li> <span>dev-guide/report</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/">[Excel报表](xpt-report.md)</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/excel-formula/">报表导出时支持Excel公式</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/excel-import/">Excel数据导入导出</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/report-design/">非线性中国式报表引擎NopReport源码解析</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/spl/">润乾集算器(SPL)</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/word-template-details/">超链接</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/word-template/">1. 为模板中需要被替换的文字增加超链接</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/xpt-report/">报表引擎</a> </li> <li> <span>dev-guide/report/examples</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/examples/base/">基础报表示例</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/examples/dynamic-col/">动态展开列</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/examples/form-printing/">套打</a> </li> </ul> </li> </ul> </li> <li> <span>dev-guide/rule</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/rule/rule/">采用Excel作为可视化设计器的规则引擎 NopRule</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/rule/validator/">验证模型</a> </li> </ul> </li> <li> <span>dev-guide/security</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/security/security-design/">Nop平台这么灵活，是不是很容易出现安全性问题？</a> </li> </ul> </li> <li> <span>dev-guide/sonar</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/sonar/sonarqube/">配置</a> </li> </ul> </li> <li> <span>dev-guide/spring</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/spring/spring-delta/">如何为Spring和Mybatis增加可逆计算支持</a> </li> </ul> </li> <li> <span>dev-guide/vfs</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/vfs/model-loader/">DSL模型文件加载</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/vfs/std-resource-path/">标准资源路径模式</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/vfs/vfs/">虚拟文件系统</a> </li> </ul> </li> <li> <span>dev-guide/workflow</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/workflow/flow-builder/">类钉钉工作流</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/workflow/graph-designer/">通用流程设计器</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/workflow/task-flow/">逻辑编排</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/workflow/task-queue/">任务队列</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/workflow/task/">堆栈式任务流</a> </li> </ul> </li> <li> <span>dev-guide/xlang</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/">XLang</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/antlr/">AST映射约定</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/feature-expr/">特性开关</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/meta-programming/">低代码平台中的元编程(Meta Programming)</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/x-override/">可逆计算理论中的Delta合并算法</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xdef/">XDef元模型定义语言</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xdsl/">XDSL：通用的领域特定语言设计</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xjson/">使用XML格式来表达json对象</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xlang-demo/">XLang综合示例</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xlang/">简要说明</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xmeta/">元数据</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xpath/">dev-guide/xlang/xpath.md</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xpl/">说明</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xscript/">XScript</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xtransform/">dev-guide/xlang/xtransform.md</a> </li> </ul> </li> <li> <span>dev-guide/xui</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/">XUI</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/adapter/">适配</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/amis/">AMIS框架扩展</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/javascript/">XScript与JavaScript的兼容性</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/layout/">布局语言</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/sdk/">通过nop-sdk实现前端集成</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/typescript/">提取实体类型的部分字段类型</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/web-xlib/">web.xlib</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/xpage/">前端配置</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/xview/">XView视图模型</a> </li> </ul> </li> </ul> </li> <li> <span>faq</span> <ul> <li> <a href="/projects/nop-entropy/docs/faq/debug-errors/">调试错误</a> </li> <li> <a href="/projects/nop-entropy/docs/faq/faq/">常见问题</a> </li> </ul> </li> <li> <span>frontend</span> <ul> <li> <a href="/projects/nop-entropy/docs/frontend/frontend-design/">前端架构设计</a> </li> <li> <a href="/projects/nop-entropy/docs/frontend/nop-site/">界面框架</a> </li> <li> <a href="/projects/nop-entropy/docs/frontend/react/">React</a> </li> <li> <a href="/projects/nop-entropy/docs/frontend/vite/">Vite</a> </li> </ul> </li> <li> <span>gpt</span> <ul> <li> <a href="/projects/nop-entropy/docs/gpt/copilot-prompts/">gpt/copilot-prompts.md</a> </li> <li> <a href="/projects/nop-entropy/docs/gpt/create-module/">gpt/create-module.md</a> </li> <li> <a href="/projects/nop-entropy/docs/gpt/create-workflow/">gpt/create-workflow.md</a> </li> <li> <a href="/projects/nop-entropy/docs/gpt/read-doc/">gpt/read-doc.md</a> </li> <li> <a href="/projects/nop-entropy/docs/gpt/update-table/">gpt/update-table.md</a> </li> <li> <span>gpt/alpha-codium</span> <ul> <li> <a href="/projects/nop-entropy/docs/gpt/alpha-codium/READM/">gpt/alpha-codium/READM.md</a> </li> </ul> </li> <li> <span>gpt/gpt-pilot</span> <ul> <li> <a href="/projects/nop-entropy/docs/gpt/gpt-pilot/READM/">gpt/gpt-pilot/READM.md</a> </li> </ul> </li> <li> <span>gpt/reference</span> <ul> <li> <a href="/projects/nop-entropy/docs/gpt/reference/tutor/">gpt/reference/tutor.md</a> </li> </ul> </li> </ul> </li> <li> <span>intro</span> <ul> <li> <a href="/projects/nop-entropy/docs/intro/intro/">介绍</a> </li> </ul> </li> <li> <span>performance</span> <ul> <li> <a href="/projects/nop-entropy/docs/performance/optimize-theory/">性能优化方法论</a> </li> <li> <a href="/projects/nop-entropy/docs/performance/optimize-tool/">性能优化工具</a> </li> </ul> </li> <li> <span>theory</span> <ul> <li> <a href="/projects/nop-entropy/docs/theory/">知乎专栏: [可逆计算](https://www.zhihu.com/column/reversible-computation)</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/advantage-of-lowcode/">低代码开发的优势体现在哪里？</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/ddd-in-nop/">万字长文讲清DDD在低代码平台中的最佳实践</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/declarative-programming/">从可逆计算看声明式编程</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/decouple/">解耦远不止依赖注入</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/delta-oriented-programming/">从可逆计算看Delta Oriented Programming</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/design-methodology/">一. 树形结构：长程关联</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/discussion-about-reversible-computation/">关于可逆计算的讨论--答圆角骑士魔理沙</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/discusson-about-nop/">关于Nop平台以及低代码平台建设经验的讨论</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/essence-of-react/">从React Hooks看React的本质</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/framework-agnostic/">业务开发如何才能独立于框架</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/generic-delta-composition/">通用的Delta差量化机制</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/good_design/">theory/good_design.md</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/graphql-vs-rest/">为什么在数学的意义上GraphQL严格的优于REST？</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/lowcode-expained/">1. 代码生成器是低码吗？</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/lowcode-ioc/">如果重写SpringBoot，我们会做哪些不同的选择？</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/lowcode-orm-1/">低代码平台需要什么样的ORM引擎？(1)</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/lowcode-orm-2/">低代码平台需要什么样的ORM引擎?(2)</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/lowcode-task-flow/">从零开始编写的下一代逻辑编排引擎</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/methodology-of-reversible-computation/">可逆计算理论</a> </li> <li> <a class="is-selected" href="/projects/nop-entropy/docs/theory/nop-for-gpt/">GPT用于复杂代码生产所需要满足的必要条件</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/paxos/">Paxos的魔法学研究报告</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/pros-and-cons-of-framework/">如何评价一种框架技术的好坏？</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/reuse/">从可逆计算看AI时代的复用</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/reversible-computation-and-lowcode/">从可逆计算看低代码</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/reversible-computation-for-programmers/">写给程序员的可逆计算理论辨析</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/reversible-computation-for-programmers2/">写给程序员的可逆计算理论辨析补遗</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/reversible-computation/">可逆计算：下一代软件构造理论</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/technical-strategy/">Nop平台为什么是一个独一无二的开源软件开发平台</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/tensor-product-lowcode/">从张量积看低代码平台的设计</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/what-does-reversible-mean/">可逆计算理论中的可逆到底指的是什么？</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/what-is-data-driven/">什么是数据驱动？它和模型驱动、领域驱动、元数据驱动、DSL驱动之间有什么区别？</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/why-nop-report-is-special/">NopReport为什么是一个非常独特的报表引擎？</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/why-xml/">为什么Nop平台坚持使用XML而不是JSON或者YAML</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/xdsl-design/">从可逆计算看DSL的设计要点</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/xml-json-equivalence/">XML、JSON和函数AST的等价性</a> </li> <li> <span>theory/amis</span> <ul> <li> <a href="/projects/nop-entropy/docs/theory/amis/amis-and-declarative-programming/">再谈百度AMIS框架和声明式编程</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/amis/why-amis-is-good/">为什么说百度AMIS框架是一个优秀的设计</a> </li> </ul> </li> </ul> </li> <li> <span>tutorial</span> <ul> <li> <a href="/projects/nop-entropy/docs/tutorial/tutorial/">开发示例</a> </li> <li> <a href="/projects/nop-entropy/docs/tutorial/tutorial_en/">Development Tutorial</a> </li> <li> <span>tutorial/simple</span> <ul> <li> <a href="/projects/nop-entropy/docs/tutorial/simple/1-simple-service/">Nop入门：极简服务层开发</a> </li> <li> <a href="/projects/nop-entropy/docs/tutorial/simple/2-simple-dao/">Nop入门：极简数据访问层开发</a> </li> <li> <a href="/projects/nop-entropy/docs/tutorial/simple/3-simple-page/">极简前端页面开发</a> </li> </ul> </li> </ul> </li> <li> <span>user-guide</span> <ul> <li> <a href="/projects/nop-entropy/docs/user-guide/">用户指南</a> </li> <li> <a href="/projects/nop-entropy/docs/user-guide/batch/">user-guide/batch.md</a> </li> <li> <a href="/projects/nop-entropy/docs/user-guide/report/">采用Excel作为设计器的开源中国式报表引擎：NopReport</a> </li> <li> <a href="/projects/nop-entropy/docs/user-guide/rule/">user-guide/rule.md</a> </li> <li> <a href="/projects/nop-entropy/docs/user-guide/workflow/">user-guide/workflow.md</a> </li> <li> <span>user-guide/idea</span> <ul> <li> <a href="/projects/nop-entropy/docs/user-guide/idea/idea-plugin/">XLang DSL Plugin</a> </li> </ul> </li> <li> <span>user-guide/monitor</span> <ul> <li> <a href="/projects/nop-entropy/docs/user-guide/monitor/grafana/">运行时监控</a> </li> </ul> </li> </ul> </li> </ul> </nav> </aside> <main class="Page-main"> <article class="Article container-fluid"> <header class="Article-header"> <h1 class="Article-title">GPT用于复杂代码生产所需要满足的必要条件</h1> </header> <div class="Article-content col-md-9"><p>现在很多人都在尝试用GPT直接生成代码，试图通过自然语言指导GPT完成传统的编码工作。但是，<strong>几乎没有人去真正认真的考虑一下生成的代码如何长期维护的问题</strong>。</p> <p>基于可逆计算理论的基本概念，我们可以进行如下推理：</p> <ol> <li> <p>如果一段复杂的业务逻辑代码要能够长期稳定运行，那么肯定不可能是每次需求变化都重新生成代码。<strong>我们必须要以受控的差量化的形式对原有的逻辑进行修正</strong>，所以我们必须要定义Delta差量空间，而且<strong>必须要保证在这个空间中能够通过程序自动进行差量合并运算</strong>。更进一步的推理，如果我们要保证对一个复杂系统的差量描述的稳定性，那么它必然是要定义在具有业务含义的领域模型空间，而不能定义在通用程序语言空间。通用程序语言空间过大，而且与需求空间不是对齐的关系，一个很小的需求变化可能导致通用程序语言空间中大量的变动，从而影响到逻辑表达的稳定性。</p> </li> <li> <p>考虑到自然语言天生的歧义性，复杂业务逻辑的稳定载体不应该是自然语言。可以想象一下，即使今天的自然语言描述在当前的语境下是无歧义的，随着社会环境的变迁，人们使用的词语含义的漂移，同样的自然语言描述在未来的语境下也可能会产生不同的解读。为了稳定、精确的表达业务逻辑，保证绝对可重复的按照指定语义执行，我们需要使用人类智能最近100年才达到的光辉顶点；形式语言。为了保证GPT自动生成的形式语言逻辑可以被人们理解并快速进行验证和检查，它应该提供一种与业务需求的复杂度相匹配的、<strong>可以使用工具自动验证</strong>、并<strong>可以从中反向抽取信息用于其他用途</strong>的描述式语言：领域特定语言(DSL)。</p> </li> <li> <p>程序代码中沉淀了大量业务知识，但是此前的编程技术往往将这种知识禁锢在某种技术实现中，我们没有通用的技术手段反向进行信息提取。即使是可以使用GPT去理解一段现成的代码并生成对它的自然语言解释，我们也难以生成一段程序可以准确无误的将我们需要获取的知识从系统源码中反向提取出来。GPT生成的代码解释仅仅能起到一些参考作用，它随时可能因为幻觉而胡说八道。但是，如果我们是使用GPT来构建一个新的系统，为什么不从一开始就<strong>使用一种支持可逆分析的结构表达方式</strong>？</p> </li> <li> <p>如果GPT不是通过简单的问答方式完成任务，而是可以调用外部插件、自行设计比较复杂的执行计划，那么无论从安全性角度考虑，还是从与外部交互的稳定性角度考虑，我们都需要<strong>限制GPT发出的指令必须限制在我们预先设定的语义空间中</strong>。</p> </li> </ol> <p>有些程序员可能并不重视理论层面的分析，认为针对AI大模型的Prompt工程就是一个实践经验累积的问题。我不同意这种观点。实际上，根据上面可逆计算理论的分析，我们可以很自然的得到将GPT作为严肃的软件生产工具所需要满足的<strong>必要条件</strong>：</p> <p><strong>GPT的输入输出应该是差量化的DSL（领域语言）描述</strong>。</p> <h2 id="dsl">建立在统一元模型基础之上的DSL森林</h2> <p>很多人相信GPT可以理解复杂的业务逻辑描述并生成准确无误的通用代码实现，那GPT为什么不能掌握结构更简单、语义定义更清晰的DSL语言？一个常见的误解是，DSL语言采用自制的小众语法，大语言模型没有足够的训练语料，无法掌握它的语法。但实际上，DSL真正重要的是它所建立的领域语义空间，它会使用领域中专有的名词，非常精炼的表达相关的业务知识，并且可以很自然的映射到用户的需求描述。比如为了描述用户的审批流程，我们只需要使用流程、步骤、动作、审批人等少数概念，DSL中使用的每个Token都具有业务语义，而不是因为某种技术限制而加入的。反之，如果要使用通用语言代码去定义，则必然会涉及到导入依赖包、声明变量作用域等一系列与业务无关的、因为程序语言语法限制而产生的细节问题。</p> <p><strong>如果只关注于DSL的语义，我们完全可以采用通用的XML或者JSON语法作为DSL的通用语法</strong>。简单的说，DSL可以采用AST语法树的形式来定义。这种做法类似于<a href="https://www.bookstack.cn/read/BuildYourOwnLispCn/spilt.1.S-Expressions.md" target="_blank" rel="external nofollow">LISP语言的S表达式</a>，只不过我们可以采用XML标签这种更加易读的表示方式。多种不同的表示方式之间是可以进行<strong>可逆转换</strong>的。比如，Nop平台中定义了XML和JSON格式之间的多种可逆转换的方式，本质上用JSON和XML都可以表示同一个DSL。</p> <p>采用了统一的表示语法之后，不同的DSL就可以<strong>使用统一的元模型来进行约束</strong>（类似Json Schema），并进而构成一个DSL森林。<strong>DSL森林借助于统一的元模型可以实现语义上的一致性理解</strong>，并支持多个DSL之间的<strong>无缝嵌入</strong>。</p> <p>很多程序员有一个传统上的印象，认为设计新的DSL需要自行编写解析器、编译器，而且还需要自己维护IDE插件，工作量浩大。但是在Nop平台中，只需要定义XDef元模型，就可以自动得到解析器、验证器、IDE语法提示功能，并且可以直接<strong>在IDEA中设置断点进行单步调试</strong>！Nop平台还可以根据XDef元模型定义<strong>自动实现领域对象与Excel模板文件之间的双向转换</strong>（将Excel文档转换为DSL描述，或者根据DSL描述导出Excel文档），可以<strong>自动生成可视化设计器</strong>等。Nop平台提供了所谓领域语言工作台(Domain Language Workbench)的概念，可以快速开发并扩展DSL语言。它的这一设计目标类似于JetBrains公司的<a href="https://www.jetbrains.com/mps/" target="_blank" rel="external nofollow">MPS产品</a>，但是Nop平台建立在可逆计算理论的概念基础之上，它的技术路线更加简洁、明确，复杂度远远小于MPS，另一方面在灵活性和可扩展性方面又大大的超越MPS。</p> <h2 id="xmldsl">为什么XML是一种合适的DSL语法载体？</h2> <p>很多程序员并没有亲自设计过XML格式的DSL语言，只是听业界的前辈讲过上古时代的XML是如何被后起之秀淘汰的传说，就由此形成了一种刻板印象，认为XML过于冗长，只能用于机器之间传递信息，并不适合于人机交互。但是，这是一种错误的偏见，源于XML原教旨主义对于XML错误的使用方式，以及一系列XML国际规范对错误使用方式的推波助澜。</p> <p>很多人一想到用XML来表达逻辑，浮上心头的刻板印象可能是</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;function&gt;</span>
   <span class="nt">&lt;name&gt;</span>myFunc<span class="nt">&lt;/name&gt;</span>
   <span class="nt">&lt;args&gt;</span>
      <span class="nt">&lt;arg&gt;</span>
         <span class="nt">&lt;arg&gt;</span>
           <span class="nt">&lt;name&gt;</span>arg1<span class="nt">&lt;/name&gt;</span>
           <span class="nt">&lt;value&gt;</span>3<span class="nt">&lt;/value&gt;</span>
         <span class="nt">&lt;/arg&gt;</span>
         <span class="nt">&lt;arg&gt;</span>
           <span class="nt">&lt;arg&gt;</span>
              <span class="nt">&lt;name&gt;</span>arg2<span class="nt">&lt;/name&gt;</span>
              <span class="nt">&lt;value&gt;</span>aaa<span class="nt">&lt;/value&gt;</span>
           <span class="nt">&lt;/arg&gt;</span>
         <span class="nt">&lt;/arg&gt;</span>
      <span class="nt">&lt;/arg&gt;</span>
   <span class="nt">&lt;/args&gt;</span>
<span class="nt">&lt;/function&gt;</span></code></pre></figure> <p>但是实际上我们完全可以采用如下XML格式</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;myFunc</span> <span class="na">arg1=</span><span class="s">&quot;3&quot;</span> <span class="na">arg2=</span><span class="s">&quot;aa&quot;</span> <span class="nt">/&gt;</span></code></pre></figure> <p>如果要表达arg1的参数值类型是整数类型，而不是字符串类型，则可以对XML语法进行扩展，允许直接使用数字作为属性值。也可以类似Vue框架，通过补充特定的前缀信息来区别是否字符串，例如规定<code>@:</code>前缀表示后面的值满足JSON语法规范，可以按照JSON格式进行解析。</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;myFunc</span> <span class="na">arg1=</span><span class="s">3</span> <span class="na">arg2=</span><span class="s">&quot;aa&quot;</span> <span class="nt">/&gt;</span> 或者
<span class="nt">&lt;myFunc</span> <span class="na">arg1=</span><span class="s">&quot;@:3&quot;</span> <span class="na">arg2=</span><span class="s">&quot;aa&quot;</span> <span class="nt">/&gt;</span></code></pre></figure> <p>在Nop平台中，我们规定了JSON和XML之间的双向转换规则。例如对于如下AMIS页面描述：</p> <figure class="highlight"><pre><code class="language-json" data-lang="json"><span></span><span class="p">{</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;crud&quot;</span><span class="p">,</span>
  <span class="nt">&quot;draggable&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">&quot;bulkActions&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;button&quot;</span><span class="p">,</span>
      <span class="nt">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;批量删除&quot;</span><span class="p">,</span>
      <span class="nt">&quot;actionType&quot;</span><span class="p">:</span> <span class="s2">&quot;ajax&quot;</span><span class="p">,</span>
      <span class="nt">&quot;api&quot;</span><span class="p">:</span> <span class="s2">&quot;delete:/amis/api/mock2/sample/${ids|raw}&quot;</span><span class="p">,</span>
      <span class="nt">&quot;confirmText&quot;</span><span class="p">:</span> <span class="s2">&quot;确定要批量删除?&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;button&quot;</span><span class="p">,</span>
      <span class="nt">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;批量修改&quot;</span><span class="p">,</span>
      <span class="nt">&quot;actionType&quot;</span><span class="p">:</span> <span class="s2">&quot;dialog&quot;</span><span class="p">,</span>
      <span class="nt">&quot;dialog&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;批量编辑&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;sample-bulk-edit&quot;</span><span class="p">,</span>
        <span class="nt">&quot;body&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;form&quot;</span><span class="p">,</span>
          <span class="nt">&quot;api&quot;</span><span class="p">:</span> <span class="s2">&quot;/amis/api/mock2/sample/bulkUpdate2&quot;</span><span class="p">,</span>
          <span class="nt">&quot;body&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
              <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;hidden&quot;</span><span class="p">,</span>
              <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;ids&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;input-text&quot;</span><span class="p">,</span>
              <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;engine&quot;</span><span class="p">,</span>
              <span class="nt">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;Engine&quot;</span>
            <span class="p">}</span>
          <span class="p">]</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span></code></pre></figure> <p>对应的XML格式为</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;crud</span> <span class="na">draggable=</span><span class="s">&quot;@:true&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;bulkActions</span> <span class="na">j:list=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">label=</span><span class="s">&quot;批量删除&quot;</span> <span class="na">actionType=</span><span class="s">&quot;ajax&quot;</span> <span class="na">confirmText=</span><span class="s">&quot;确定要批量删除?&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;api&gt;</span>delete:/amis/api/mock2/sample/${ids|raw}<span class="nt">&lt;/api&gt;</span>
    <span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">label=</span><span class="s">&quot;批量修改&quot;</span> <span class="na">actionType=</span><span class="s">&quot;dialog&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;dialog</span> <span class="na">title=</span><span class="s">&quot;批量编辑&quot;</span> <span class="na">name=</span><span class="s">&quot;sample-bulk-edit&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;body&gt;</span>
           <span class="nt">&lt;form&gt;</span>
             <span class="nt">&lt;api&gt;</span>/amis/api/mock2/sample/bulkUpdate2<span class="nt">&lt;/api&gt;</span>
             <span class="nt">&lt;body&gt;</span>
               <span class="nt">&lt;hidden</span> <span class="na">name=</span><span class="s">&quot;ids&quot;</span> <span class="nt">/&gt;</span>
               <span class="nt">&lt;input-text</span> <span class="na">name=</span><span class="s">&quot;engine&quot;</span> <span class="na">label=</span><span class="s">&quot;Engine&quot;</span> <span class="nt">/&gt;</span>
             <span class="nt">&lt;/body&gt;</span>
           <span class="nt">&lt;/form&gt;</span>
        <span class="nt">&lt;/body&gt;</span>
      <span class="nt">&lt;/dialog&gt;</span>
    <span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/bulkActions&gt;</span>
<span class="nt">&lt;/crud&gt;</span></code></pre></figure> <p>实际上XML语法看起来要更加紧凑直观。</p> <blockquote> <p>这里使用的是无元模型约束的JSON-XML转换，所以需要使用j:list来标记数组元素，并用@:前缀来表示非字符串值。如果XML文件具有XDef元模型定义，就不需要这些额外的标注信息了。</p> </blockquote> <p>使用XML相对于JSON格式的另外一个好处是它可以很容易的引入XML扩展标签来用于代码生成，代码的表示形式和代码生成的结果形式都是XML格式，这在Lisp语言中被称作是<a href="https://baike.baidu.com/item/%E5%90%8C%E5%83%8F%E6%80%A7/" target="_blank" rel="external nofollow">同像性</a>。<strong>目前JSON格式缺乏一种同像的代码生成方式</strong>。</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;columns&gt;</span>
  <span class="nt">&lt;c:forEach</span> <span class="na">var=</span><span class="s">&quot;col&quot;</span> <span class="na">items=</span><span class="s">&quot;${entityModel.columns}&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">&quot;${col.name}&quot;</span> <span class="na">sqlType=</span><span class="s">&quot;${col.sqlType}&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/c:forEach&gt;</span>
<span class="nt">&lt;/columns&gt;</span></code></pre></figure> <p>关于XML和JSON的等价性，进一步的讨论可以参见 <a href="https://zhuanlan.zhihu.com/p/554294376" target="_blank" rel="external nofollow">XML、JSON和函数AST的等价性</a></p> <h2 id="ai">AI需要理解元模型</h2> <p>AI大模型之所以引起轰动，本质上在于它表现出了超越简单模式记忆的复杂的逻辑推理能力。在这种能力的加持下，AI大模型学习DSL语言应该完全不需要大量的程序语料，只需要告诉它这个语言内在的结构约束规律就可以了。</p> <p>元模型和元语言的发现是近100年来数学领域中最具革命性的发现之一。元模型和元语言在数学领域具有特殊的重要地位，范畴论的发展与模型论、元语言的研究息息相关。在程序开发领域，我们应该可以通过元模型向AI大模型精确的传递DSL语法结构知识以及局部的语义知识，具体来说所谓的元模型基本可以看作是一种类似JSON Schema的模式定义。</p> <p>在Nop平台中，我们强调元模型与具体模型对象之间的<a href="https://baike.baidu.com/item/%E5%90%8C%E6%80%81/1174148" target="_blank" rel="external nofollow">同态关系</a>。也就是说，Schema的形式应该和数据自身的结构形式基本一致，而不是像XML Schema那样把树状结构的领域结构拆分为大量的对象-属性关系，用完全不同的语法形式去表达。例如</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;entity</span> <span class="na">name=</span><span class="s">&quot;test.MyEntity&quot;</span> <span class="na">table=</span><span class="s">&quot;my_entity&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;columns&gt;</span>
    <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">&quot;SID&quot;</span> <span class="na">sqlType=</span><span class="s">&quot;VARCHAR&quot;</span> <span class="na">length=</span><span class="s">&quot;30&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">&quot;TITLE&quot;</span> <span class="na">sqlType=</span><span class="s">&quot;VARCHAR&quot;</span> <span class="na">length=</span><span class="s">&quot;200&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/columns&gt;</span>
<span class="nt">&lt;/entity&gt;</span>
对应的XDef元模型定义为:

<span class="nt">&lt;entity</span> <span class="na">name=</span><span class="s">&quot;!class-name&quot;</span> <span class="na">table=</span><span class="s">&quot;!string&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;columns</span> <span class="na">xdef:body-type=</span><span class="s">&quot;list&quot;</span> <span class="na">xdef:key-attr=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>
     <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">&quot;!prop-name&quot;</span> <span class="na">sqlType=</span><span class="s">&quot;!std-sql-type&quot;</span> <span class="na">length=</span><span class="s">&quot;int&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/columns&gt;</span>
<span class="nt">&lt;/entity&gt;</span></code></pre></figure> <p>基本上XDef就是把具体的值替换为stdDomain定义，同时对于列表元素只保留唯一的一个条目。</p> <blockquote> <p>stdDomain类似于类型声明，但是它可以由用户自定义的扩展，所有的stdDomain在一个字典表中维护，可以实现对于字段值施加局部的语义约束。例如，class-name表示必须满足java类名的格式要求，并不允许所有的字符串。在stdDomain前可以添加感叹号，表示该属性值不能为空。</p> </blockquote> <p>目前的大模型都是通过填空的方式训练的，所以采用这种同态设计方式也便于大模型快速掌握元模型。现在大模型应用中给定少量样本的情况下也可以反向猜测得到对应的Schema类型约束，但是这种猜测肯定是不准确的，比如说我们很难通过样本告诉大模型，某些格式的字符串是不合法的，比如不允许包含-作为连接符等。<strong>通过元模型可以快速高效的向大模型传递领域知识</strong>。</p> <p>所以我认为，大模型的训练过程中应该有意识的加强对于元模型的训练，元模型应该和普通的模型有所区分，值得付出额外的努力提高大模型对于元模型的精确掌握程度。</p> <p>具体使用元模型与GPT交互的尝试可以参见我的文章 <a href="https://zhuanlan.zhihu.com/p/614745000" target="_blank" rel="external nofollow">GPT驱动低代码平台生产完整应用的已验证策略</a></p> <h2 id="nopgpt">Nop平台与GPT结合的具体策略</h2> <p>Nop平台与GPT沟通的策略如下：</p> <ol> <li>通过当前所使用DSL的xdef元模型帮助GPT更快、更精确的理解DSL结构</li> <li>通过可逆计算的差量合并规则，指导GPT直接返回差量描述</li> <li>将返回差量合并到当前模型上，成为新的当前模型，在此基础上可以无限次与GPT沟通。</li> <li>对于复杂的逻辑推理往往无法通过单一的DSL一步到位的解决问题，此时我们可以通过多个DSL来建立一个差量流水线，将问题分解为几个步骤来解决。 <img src="/assets/knosys/project-nop-entropy/tutorial/delta-pipeline-7f3682b4c862d66c2397688060056dfc483b6da6b038cfdf77ef4e0016b4e7e5.png" alt="" /></li> </ol> <p>基于Nop平台提供的DSL支持，AI和人工可以采用如下的相互配合方式：</p> <ol> <li> <p>AI按照需求规格产生顶层的DSL</p> </li> <li> <p>通过人工编写的代码生成器将DSL展开为下一层次的DSL</p> </li> <li> <p>人工可以使用Delta定制方式对AI生成的DSL进行细化调整</p> </li> <li> <p>最细节处可以让AI根据局部知识再进行细化</p> </li> </ol> <p>简单的说起来相当于是1. AI产生粗加工结果 2. 人工细化 3. AI抛光</p> <p>现在很多程序员设想的AI代码生成都是生成接口、类、属性等软件中常用的组成成分。但是Nop平台中的做法与此完全不同。正如我不断强调的观点，类-属性的抽象是我们受底层实现技术的限制所形成的结果，它与领域内部结构之间的关系并不是完全对应的，比如我反复强调的领域结构坐标的概念映射到类型层面之后会出现缺失，导致无法精确的进行差量化修正。Nop平台中的DSL是面向Tree结构的，可以一次性的产出一整颗逻辑树。</p> <p>有些人想到要对此前生成的代码结构进行微调，那么是否可以利用AI模型生成一系列的API调用，通过这些API来调整模型？例如通过生成API来从数据模型中删除phone3字段。</p> <figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>entityModel.getColumns().remove(&quot;phone3“);</code></pre></figure> <p>如果对比一下Nop平台中的Delta合并算子，我们就可以知道为什么这种API的方式是一种不优化的方案。</p> <figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>&lt;columns&gt;
   &lt;column name=&quot;phone3&quot; x:override=&quot;remove&quot; /&gt;
   &lt;column name=&quot;status&quot; sqlType=&quot;INTEGER&quot; /&gt;
&lt;/columns&gt;</code></pre></figure> <p>Nop的方案具有如下优势：</p> <ol> <li> <p>多个Delta修改可以合并成一个结果，并且在合并的过程中可以进行简化，抛弃重复修改的部分。而使用API的方式本质是把修改动作作为Delta来使用，但是多个动作无法被自动合并、简化。如果不在脑海中逐个执行这些动作，我们无法理解最终系统会被修改成什么样。这也就是可逆计算理论一直强调的，Delta应该可以被独立被理解、独立被定义，并且Delta应该满足结合律，可以进行局部化简。</p> </li> <li> <p>领域模型的Delta定义可以被程序自动分析，反向抽取出其中的信息。而如果采用API的方式来实现Delta，我们就没有很简单的工具可以分析Delta的具体组成，在不应用Delta之前无法精确知道它的影响范围等。这种逆向信息抽取的能力也是可逆计算理论所反复强调的内容。</p> </li> <li> <p>Delta修改之所以能够应用到基础模型上在于我们可以精确的定义变化发生的位置，如实体模型的字段集合中的名称为phone3的字段处，这个位置定义应该是有着明确业务含义，且具有唯一性的某种路径定义，而MyEntity模型文件中的第10行到第20行这样的定位描述方式其实是不稳定、不明确的。Nop平台的Delta定制方案是对领域模型坐标系的精确利用，而API调用的方式则将定位坐标这一概念深深的隐藏在函数的调用链中。GPT生成时完全可能使用某些临时的定位手段，而错过领域坐标系中最有效的直接定位手段。</p> </li> </ol> <p>实际上，基于可逆计算理论的指导，<strong>主动从元模型、可逆、差量化的角度去重新审视编程中的具体实践方案</strong>，我们可以得到很多新的认知，并找到进一步改进的方向。</p> <h2 id="prompt">从可逆计算的角度看Prompt</h2> <p>一些硬核的prompt设计可以很自然的从可逆计算理论的角度进行解释，比如<a href="https://www.cnblogs.com/botai/p/HuggingGPT-task.html" target="_blank" rel="external nofollow">HuggingGPT中的TaskPlan</a>:</p> <figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>The AI assistant performs task parsing on user input, generating a list
of tasks with the following format:
[{&quot;task&quot;: task, &quot;id&quot;, task_id, &quot;dep&quot;: dependency_task_ids,
&quot;args&quot;: {&quot;text&quot;: text, &quot;image&quot;: URL, &quot;audio&quot;: URL, &quot;video&quot;: URL}}].</code></pre></figure> <p>这个提示词的形式非常接近于XDef元模型定义。而HuggingGPT的运行方式正是让GPT返回满足元模型要求的DSL语句。</p> <p>微软提出的<a href="https://github.com/microsoft/guidance" target="_blank" rel="external nofollow">guidance项目</a>采用如下格式的prompt:</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><span></span><span class="n">role_simulator</span> <span class="o">=</span> <span class="n">guidance</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">{{#system~}}</span>
<span class="s1">You are a helpful assistant</span>
<span class="s1">{{~/system}}</span>

<span class="s1">{{#user~}}</span>
<span class="s1">You will answer the user as {{role}} in the following conversation. At every step, I will provide you with the user input, as well as a comment reminding you of your instructions. Never talk about the fact that you are an AI, even if the user asks you. Always answer as {{role}}.</span>
<span class="s1">{{#if first_question}}You can also start the conversation.{{/if}}</span>
<span class="s1">{{~/user}}</span>

<span class="s1">{{~! The assistant either starts the conversation or not, depending on if this is the first or second agent }}</span>
<span class="s1">{{#assistant~}}</span>
<span class="s1">Ok, I will follow these instructions.</span>
<span class="s1">{{#if first_question}}Let me start the conversation now:</span>
<span class="s1">{{role}}: {{first_question}}{{/if}}</span>
<span class="s1">{{~/assistant}}</span>

<span class="s1">{{~! Then the conversation unrolls }}</span>
<span class="s1">{{~#geneach &#39;conversation&#39; stop=False}}</span>
<span class="s1">{{#user~}}</span>
<span class="s1">User: {{set &#39;this.input&#39; (await &#39;input&#39;)}}</span>
<span class="s1">Comment: Remember, answer as a {{role}}. Start your utterance with {{role}}:</span>
<span class="s1">{{~/user}}</span></code></pre></figure> <p>显然，如果引入一种规范化、系统化的树状结构表示方法，可以说机器省心，我们也省心。</p> <p>基于可逆计算理论设计的低代码平台NopPlatform已开源：</p> <ul> <li>gitee: <a href="https://gitee.com/canonical-entropy/nop-entropy" target="_blank" rel="external nofollow">canonical-entropy/nop-entropy</a></li> <li>github: <a href="https://github.com/entropy-cloud/nop-entropy" target="_blank" rel="external nofollow">entropy-cloud/nop-entropy</a></li> <li>开发示例：<a href="https://gitee.com/canonical-entropy/nop-entropy/blob/master/docs/tutorial/tutorial.md" target="_blank" rel="external nofollow">docs/tutorial/tutorial.md</a></li> <li><a href="https://www.bilibili.com/video/BV1u84y1w7kX/" target="_blank" rel="external nofollow">可逆计算原理和Nop平台介绍及答疑_哔哩哔哩_bilibili</a></li> </ul> </div> <footer class="Article-footer col-md-3"> <div class="Widget" data-url="/projects/nop-entropy/docs/theory/nop-for-gpt/" data-path="_knosys/project-nop-entropy/theory/nop-for-gpt.md"> <div class="Widget-body"><a href="https://gitee.com/canonical-entropy/nop-entropy/edit/master/docs/theory/nop-for-gpt.md" target="_blank" rel=" rel="external nofollow"">在 Gitee 上编辑文档内容</a></div> </div> <section class="Widget Widget--toc"> <div class="Widget-header"> <h2 class="Widget-title">目录</h2> </div> <div class="Widget-body"></div> </section> </footer> </article> <footer class="Page-footer Footer"> <div class="container-fluid"> <div class="Footer-description"> <!-- Important links --> <nav class="Footer-navs"> <ul><li><a href="/projects/nop-entropy/docs/"><span>指南</span></a> </li><li><a href="/community/"><span>社区</span></a> </li></ul> </nav> <!-- Copyright --> <div class="Footer-copyright"> <p>&copy; 2024-2024 <a href="https://nop-platform.gitee.io?utm_source=https://nop-platform.gitee.io&utm_medium=common-footer" target="_blank" rel="external nofollow">Nop 社区</a> 版权所有 </p> <p>本站主题 <a href="https://ourai.github.io/lime/?utm_source=https://nop-platform.gitee.io&utm_medium=common-footer" target="_blank" rel="external nofollow">Lime</a> 由 <a href="https://linxoid.com/ourai/?utm_source=https://nop-platform.gitee.io&utm_medium=common-footer" target="_blank" rel="external nofollow">欧雷</a> 提供</p> </div> </div> </div> </footer> </main> </div> <script>$('table').addClass('table table-bordered')</script> <script type="text/javascript" src="/assets/ksio/vendors/share.min-3155ee636b84a04d036e0f1ba833227d3fd03a4c58a6f2e21c9ceb1c5d0198c7.js"></script><script type="text/javascript" src="/assets/ksio/components-a266f21fe1dfd61bebf40e74872cbf901eb3e201f7d33e9e5d5af9a55f4b24ea.js"></script> <script type="text/javascript" src="/assets/ksio/initializers/time-8d7a529a66ae6cb53c2283d21fd6a12c538b8473dd5bd76458366d09adce7bf6.js"></script><script type="text/javascript" src="/assets/ksio/initializers/lazyload-44b7df8a9282d598284d522e64d6be9ac88d466f3c4a734a514303e99347b2c9.js"></script> </body> </html>
