<!DOCTYPE html> <html lang="zh-CN" dir="ltr"> <head> <meta charset="UTF-8"> <!-- SEO --> <title>Nop平台与SpringCloud的功能对比 - Nop</title> <meta property="og:title" content="Nop平台与SpringCloud的功能对比"> <meta name="description" content="Nop平台是根据可逆计算原理从零开始设计并实现的新一代的低代码平台，它的目标并不是针对少数固化的场景提供预置的开发脚手架和可视化设计工具，而是打破描述式编程和传统命令式编程之间人为制造的藩篱，建立两者无缝相容的一种新的编程范式。不断扩大描述式编程所覆盖的语义空间。为了以最低的技术成本达到这一目标，Nop平台没有采用目前业内主流的基础开源框架，而是选择了基于可逆计算原理重塑整个技术体系。本文将简单列举一下Nop平台所造的轮子，并与SpringCloud技术体系中现有的轮子做个对比。"> <meta property="og:description" content="Nop平台是根据可逆计算原理从零开始设计并实现的新一代的低代码平台，它的目标并不是针对少数固化的场景提供预置的开发脚手架和可视化设计工具，而是打破描述式编程和传统命令式编程之间人为制造的藩篱，建立两者无缝相容的一种新的编程范式。不断扩大描述式编程所覆盖的语义空间。为了以最低的技术成本达到这一目标，Nop平台没有采用目前业内主流的基础开源框架，而是选择了基于可逆计算原理重塑整个技术体系。本文将简单列举一下Nop平台所造的轮子，并与SpringCloud技术体系中现有的轮子做个对比。"> <meta name="keywords" content="Nop,Nop平台,Nop 平台,Nop Platform,Nop社区,Nop 社区,Nop Community,可逆计算,软件构造理论,低代码,lowcode,low-code,low code,低代码平台,lcdp,软件工程"> <link rel="canonical" href="https://nop-platform.gitee.io/projects/nop-entropy/docs/compare/nop-vs-springcloud/"> <meta property="og:url" content="https://nop-platform.gitee.io/projects/nop-entropy/docs/compare/nop-vs-springcloud/"> <meta property="og:site_name" content="Nop"> <script type="application/ld+json"> { "@context" : "http://schema.org", "@type" : "WebSite", "name" : "Nop", "url" : "https://nop-platform.gitee.io" } </script> <meta property="og:type" content="article"> <meta property="article:published_time" content="2024-04-04T09:51:04+08:00"> <link rel="next" href="https://nop-platform.gitee.io/projects/nop-entropy/docs/core-code-guidance/" title="Nop平台核心代码阅读导引"> <link rel="prev" href="https://nop-platform.gitee.io/projects/nop-entropy/docs/compare/nop-vs-skyve/" title="从可逆计算看开源低代码平台Skyve的设计"> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "NewsArticle", "headline": "Nop平台与SpringCloud的功能对比", "image": null, "datePublished": "2024-04-04T09:51:04+08:00", "description": "Nop平台是根据可逆计算原理从零开始设计并实现的新一代的低代码平台，它的目标并不是针对少数固化的场景提供预置的开发脚手架和可视化设计工具，而是打破描述式编程和传统命令式编程之间人为制造的藩篱，建立两者无缝相容的一种新的编程范式。不断扩大描述式编程所覆盖的语义空间。为了以最低的技术成本达到这一目标，Nop平台没有采用目前业内主流的基础开源框架，而是选择了基于可逆计算原理重塑整个技术体系。本文将简单列举一下Nop平台所造的轮子，并与SpringCloud技术体系中现有的轮子做个对比。" } </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Organization", "url": "https://nop-platform.gitee.io", "logo": "https://nop-platform.gitee.io/assets/logo-9952a8b58c6582fc86a9608db8113158fb31de7a9db19d4358ac7cb96578d34e.png" } </script> <link rel="author" href="https://nop-platform.gitee.io"> <!-- 页面渲染兼容性 --> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="renderer" content="webkit"> <meta name="viewport" content="width=device-width,initial-scale=1.0"> <meta name="theme-color" content="#0871ab"> <link rel="icon" href="/assets/logo-9952a8b58c6582fc86a9608db8113158fb31de7a9db19d4358ac7cb96578d34e.png"> <!-- 静态资源 --> <link type="text/css" rel="stylesheet" href="/assets/global-f979fafa22c865e727cd15f83cdc43dbc73c1a324d7ad4fe6fa48e275dc4c063.css"> <link type="text/css" rel="stylesheet" href="/assets/ksio/vendors/share-c2e41222f5f34b2de38cb5213fa0e439c11da73b3907b444a32635563ae85ffd.css"> <link type="text/css" rel="stylesheet" href="/assets/local/layouts/doc-c5c0ab8b12485893472e680b5f067b74e240481232265b6cb0ab6edc95c20f65.css"> <script type="text/javascript" src="/assets/global-b3a80dd53acf48ad7228d6fd741dba15d3845cbc3783bdbbf7244151a45628aa.js"></script> <!--[if lt IE 9]> <script type="text/javascript" src="/assets/ksio/support_ie8-e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.js"></script> <![endif]--> </head> <body class="Page" itemscope itemtype="http://schema.org/WebPage"> <header class="Page-header"> <div class="navbar navbar-static-top"> <div class="container-fluid"> <div class="navbar-header"> <button class="navbar-toggle collapsed" type="button" data-target=".Page-navs" data-toggle="collapse"> <span class="sr-only">Toggle navs</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/">Nop</a> </div> <!-- Nav menus --> <nav class="Page-navs navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <li class="dropdown"> <a class="dropdown-toggle" href="javascript:void(0);" data-toggle="dropdown">学习 <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="/projects/nop-entropy/docs/">指南</a> </li> <li><a href="https://www.zhihu.com/column/reversible-computation?utm_source=https://nop-platform.gitee.io&utm_medium=common-header" target="_blank" rel="external nofollow">文章</a> </li> <li><a href="https://space.bilibili.com/3493261219990250?utm_source=https://nop-platform.gitee.io&utm_medium=common-header" target="_blank" rel="external nofollow">视频</a> </li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" href="javascript:void(0);" data-toggle="dropdown">项目 <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="/projects/nop-entropy/">Nop Entropy</a> </li> <li><a href="/projects/nop-chaos/">Nop Chaos</a> </li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" href="javascript:void(0);" data-toggle="dropdown">关于 <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="/community/">社区</a> </li> <li><a href="/team/">团队</a> </li> <li><a href="https://gitee.com/nop-platform?utm_source=https://nop-platform.gitee.io&utm_medium=common-header" target="_blank" rel="external nofollow">Gitee 组织</a> </li> </ul> </li> <li><a href="https://nop-platform.github.io?utm_source=https://nop-platform.gitee.io&utm_medium=common-header" target="_blank" rel="external nofollow">English</a> </li> </ul> </nav> </div> </div> </header> <div class="Page-content"> <aside class="Page-aside"> <div class="AsideBrand"> <a href="/">Nop</a> </div> <nav class="AsideNav"><ul> <li> <a href="/projects/nop-entropy/docs/">概览</a> </li> <li> <a href="/projects/nop-entropy/docs/core-code-guidance/">Nop平台核心代码阅读导引</a> </li> <li> <a href="/projects/nop-entropy/docs/why-nop/">Nop平台的定位和发展规划</a> </li> <li> <span>arch</span> <ul> <li> <a href="/projects/nop-entropy/docs/arch/">架构</a> </li> <li> <a href="/projects/nop-entropy/docs/arch/module-dependency/">模块依赖关系</a> </li> </ul> </li> <li> <span>compare</span> <ul> <li> <a href="/projects/nop-entropy/docs/compare/nop-vs-skyve/">从可逆计算看开源低代码平台Skyve的设计</a> </li> <li> <a class="is-selected" href="/projects/nop-entropy/docs/compare/nop-vs-springcloud/">Nop平台与SpringCloud的功能对比</a> </li> </ul> </li> <li> <span>dev-guide</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/">开发指南</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/autotest/">自动测试</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/cli/">NopCli命令行工具</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/codegen/">Maven集成代码生成器</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/config/">配置规范</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/customization/">Delta定制</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/debug/">开发调试</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/delta-loader/">[虚拟文件系统](vfs/vfs.md)</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/dict/">字典表翻译</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/error-code/">统一响应格式</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/i18n/">dev-guide/i18n.md</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/intro/">dev-guide/intro.md</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/ioc/">3.1 XDef元模型定义</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/quarkus/">日志配置</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/spring/">Spring集成</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/tenant/">租户配置</a> </li> <li> <span>dev-guide/auth</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/auth/auth/">权限</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/auth/impersonate/">替代登录</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/auth/login/">登录逻辑</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/auth/service-auth/">服务鉴权</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/auth/sso/">启用SSO支持</a> </li> </ul> </li> <li> <span>dev-guide/batch</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/batch/batch-design/">SpringBatch存在的设计问题</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/batch/batch-gen/">dev-guide/batch/batch-gen.md</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/batch/batch-task/">dev-guide/batch/batch-task.md</a> </li> </ul> </li> <li> <span>dev-guide/biz</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/biz/coderule/">编码规则</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/biz/validate/">CrudBizModel中的自动验证</a> </li> </ul> </li> <li> <span>dev-guide/command</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/command/command/">命令行程序支持</a> </li> </ul> </li> <li> <span>dev-guide/delta</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/delta/delta-customization/">如何在不修改基础产品源码的情况下实现定制化开发</a> </li> </ul> </li> <li> <span>dev-guide/graphql</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/graphql/connection/">connection配置</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/graphql/crud/">标准增删改查操作</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/graphql/graphql-java/">面向对象的GraphQL</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/graphql/left-join/">通过QueryBean实现左连接查询</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/graphql/rest/">REST链接</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/graphql/upload/">GraphQL引擎的上传下载扩展</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/graphql/xbiz/">Biz模型</a> </li> </ul> </li> <li> <span>dev-guide/ide</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/ide/idea/">安装JDK</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/ide/plugin-dev/">关联Gradle工程</a> </li> </ul> </li> <li> <span>dev-guide/ioc</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/ioc/aop/">编译期代码生成</a> </li> </ul> </li> <li> <span>dev-guide/job</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/job/job-design/">分布式任务调度</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/job/job/">dev-guide/job/job.md</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/job/trigger/">dev-guide/job/trigger.md</a> </li> </ul> </li> <li> <span>dev-guide/microservice</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/microservice/feign/">Feign集成</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/microservice/grpc/">NopGraphQL对外暴露为Grpc</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/microservice/rpc-design/">低代码平台中的分布式RPC框架(约3000行代码)</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/microservice/rpc/">一. 服务端配置</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/microservice/web-filter/">配置项</a> </li> </ul> </li> <li> <span>dev-guide/model</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/model/">Excel模型</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/model/api-model/">Api模型</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/model/core-models/">核心模型说明</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/model/custom-model/">自定义模型</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/model/excel-model/">Excel数据模型</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/model/excel-xlsx/">1. 解析Excel文件得到Workbook对象</a> </li> </ul> </li> <li> <span>dev-guide/nocode</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/nocode/">在线配置数据模型和服务模型: [dyn-model.md](dyn-model.md)</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/nocode/dyn-model/">在线动态建模</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/nocode/dynamic-orm/">内置工作流支持的动态实体</a> </li> </ul> </li> <li> <span>dev-guide/orm</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/">[数据库方言](dialect.md)</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/dao-lib/">在标签库中直接执行SQL语句</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/dao/">基本约定</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/data-change-log/">实体修改状态跟踪</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/dialect/">Dialect的继承和定制</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/dql/">dev-guide/orm/dql.md</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/eql/">EQL对象查询语言</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/ext-field/">如何在不改表的情况下为实体增加扩展字段</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/field-masking/">字段掩码</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/many-to-many/">多对多关联</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/multi-datasource/">多数据源配置</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/multi-db/">多数据源配置</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/null-value/">空值的处理</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/orm-basic/">基本使用方式</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/orm/">执行原理</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/session-cache/">一级缓存</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/sql-lib/">1 统一管理SQL/EQL/DQL</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/tcc/">分布式事务</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/to-one-relation/">多对一或者一对一关联</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/orm/transaction/">事务模板</a> </li> </ul> </li> <li> <span>dev-guide/recipe</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/recipe/">1. [在后台增加字段](add-field.md)</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/recipe/add-field/">在后台Graph中增加字段</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/recipe/crud/">1. 传递一些实体上没有的字段到后台</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/recipe/filter-list/">1. 表格过滤</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/recipe/json-helper/">JSON处理</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/recipe/tree-entity/">1. 如何取出当前节点的所有兄弟节点，以及所有父节点</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/recipe/xml-helper/">1. 解析XML文本</a> </li> </ul> </li> <li> <span>dev-guide/report</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/">[Excel报表](xpt-report.md)</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/excel-formula/">报表导出时支持Excel公式</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/excel-import/">Excel数据导入导出</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/report-design/">非线性中国式报表引擎NopReport源码解析</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/spl/">润乾集算器(SPL)</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/word-template-details/">超链接</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/word-template/">1. 为模板中需要被替换的文字增加超链接</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/xpt-report/">报表引擎</a> </li> <li> <span>dev-guide/report/examples</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/examples/base/">基础报表示例</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/examples/dynamic-col/">动态展开列</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/report/examples/form-printing/">套打</a> </li> </ul> </li> </ul> </li> <li> <span>dev-guide/rule</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/rule/rule/">采用Excel作为可视化设计器的规则引擎 NopRule</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/rule/validator/">验证模型</a> </li> </ul> </li> <li> <span>dev-guide/security</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/security/security-design/">Nop平台这么灵活，是不是很容易出现安全性问题？</a> </li> </ul> </li> <li> <span>dev-guide/sonar</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/sonar/sonarqube/">配置</a> </li> </ul> </li> <li> <span>dev-guide/spring</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/spring/spring-delta/">如何为Spring和Mybatis增加可逆计算支持</a> </li> </ul> </li> <li> <span>dev-guide/vfs</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/vfs/model-loader/">DSL模型文件加载</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/vfs/std-resource-path/">标准资源路径模式</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/vfs/vfs/">虚拟文件系统</a> </li> </ul> </li> <li> <span>dev-guide/workflow</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/workflow/flow-builder/">类钉钉工作流</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/workflow/graph-designer/">通用流程设计器</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/workflow/task-flow/">逻辑编排</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/workflow/task-queue/">任务队列</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/workflow/task/">堆栈式任务流</a> </li> </ul> </li> <li> <span>dev-guide/xlang</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/">XLang</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/antlr/">AST映射约定</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/feature-expr/">特性开关</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/meta-programming/">低代码平台中的元编程(Meta Programming)</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/x-override/">可逆计算理论中的Delta合并算法</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xdef/">XDef元模型定义语言</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xdsl/">XDSL：通用的领域特定语言设计</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xjson/">使用XML格式来表达json对象</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xlang-demo/">XLang综合示例</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xlang/">简要说明</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xmeta/">元数据</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xpath/">dev-guide/xlang/xpath.md</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xpl/">说明</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xscript/">XScript</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xlang/xtransform/">dev-guide/xlang/xtransform.md</a> </li> </ul> </li> <li> <span>dev-guide/xui</span> <ul> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/">XUI</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/adapter/">适配</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/amis/">AMIS框架扩展</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/javascript/">XScript与JavaScript的兼容性</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/layout/">布局语言</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/sdk/">通过nop-sdk实现前端集成</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/typescript/">提取实体类型的部分字段类型</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/web-xlib/">web.xlib</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/xpage/">前端配置</a> </li> <li> <a href="/projects/nop-entropy/docs/dev-guide/xui/xview/">XView视图模型</a> </li> </ul> </li> </ul> </li> <li> <span>faq</span> <ul> <li> <a href="/projects/nop-entropy/docs/faq/debug-errors/">调试错误</a> </li> <li> <a href="/projects/nop-entropy/docs/faq/faq/">常见问题</a> </li> </ul> </li> <li> <span>frontend</span> <ul> <li> <a href="/projects/nop-entropy/docs/frontend/frontend-design/">前端架构设计</a> </li> <li> <a href="/projects/nop-entropy/docs/frontend/nop-site/">界面框架</a> </li> <li> <a href="/projects/nop-entropy/docs/frontend/react/">React</a> </li> <li> <a href="/projects/nop-entropy/docs/frontend/vite/">Vite</a> </li> </ul> </li> <li> <span>gpt</span> <ul> <li> <a href="/projects/nop-entropy/docs/gpt/copilot-prompts/">gpt/copilot-prompts.md</a> </li> <li> <a href="/projects/nop-entropy/docs/gpt/create-module/">gpt/create-module.md</a> </li> <li> <a href="/projects/nop-entropy/docs/gpt/create-workflow/">gpt/create-workflow.md</a> </li> <li> <a href="/projects/nop-entropy/docs/gpt/read-doc/">gpt/read-doc.md</a> </li> <li> <a href="/projects/nop-entropy/docs/gpt/update-table/">gpt/update-table.md</a> </li> <li> <span>gpt/alpha-codium</span> <ul> <li> <a href="/projects/nop-entropy/docs/gpt/alpha-codium/READM/">gpt/alpha-codium/READM.md</a> </li> </ul> </li> <li> <span>gpt/gpt-pilot</span> <ul> <li> <a href="/projects/nop-entropy/docs/gpt/gpt-pilot/READM/">gpt/gpt-pilot/READM.md</a> </li> </ul> </li> <li> <span>gpt/reference</span> <ul> <li> <a href="/projects/nop-entropy/docs/gpt/reference/tutor/">gpt/reference/tutor.md</a> </li> </ul> </li> </ul> </li> <li> <span>intro</span> <ul> <li> <a href="/projects/nop-entropy/docs/intro/intro/">介绍</a> </li> </ul> </li> <li> <span>performance</span> <ul> <li> <a href="/projects/nop-entropy/docs/performance/optimize-theory/">性能优化方法论</a> </li> <li> <a href="/projects/nop-entropy/docs/performance/optimize-tool/">性能优化工具</a> </li> </ul> </li> <li> <span>theory</span> <ul> <li> <a href="/projects/nop-entropy/docs/theory/">知乎专栏: [可逆计算](https://www.zhihu.com/column/reversible-computation)</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/advantage-of-lowcode/">低代码开发的优势体现在哪里？</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/ddd-in-nop/">万字长文讲清DDD在低代码平台中的最佳实践</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/declarative-programming/">从可逆计算看声明式编程</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/decouple/">解耦远不止依赖注入</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/delta-oriented-programming/">从可逆计算看Delta Oriented Programming</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/design-methodology/">一. 树形结构：长程关联</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/discussion-about-reversible-computation/">关于可逆计算的讨论--答圆角骑士魔理沙</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/discusson-about-nop/">关于Nop平台以及低代码平台建设经验的讨论</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/essence-of-react/">从React Hooks看React的本质</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/framework-agnostic/">业务开发如何才能独立于框架</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/generic-delta-composition/">通用的Delta差量化机制</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/good_design/">theory/good_design.md</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/graphql-vs-rest/">为什么在数学的意义上GraphQL严格的优于REST？</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/lowcode-expained/">1. 代码生成器是低码吗？</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/lowcode-ioc/">如果重写SpringBoot，我们会做哪些不同的选择？</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/lowcode-orm-1/">低代码平台需要什么样的ORM引擎？(1)</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/lowcode-orm-2/">低代码平台需要什么样的ORM引擎?(2)</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/lowcode-task-flow/">从零开始编写的下一代逻辑编排引擎</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/methodology-of-reversible-computation/">可逆计算理论</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/nop-for-gpt/">GPT用于复杂代码生产所需要满足的必要条件</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/paxos/">Paxos的魔法学研究报告</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/pros-and-cons-of-framework/">如何评价一种框架技术的好坏？</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/reuse/">从可逆计算看AI时代的复用</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/reversible-computation-and-lowcode/">从可逆计算看低代码</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/reversible-computation-for-programmers/">写给程序员的可逆计算理论辨析</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/reversible-computation-for-programmers2/">写给程序员的可逆计算理论辨析补遗</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/reversible-computation/">可逆计算：下一代软件构造理论</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/technical-strategy/">Nop平台为什么是一个独一无二的开源软件开发平台</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/tensor-product-lowcode/">从张量积看低代码平台的设计</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/what-does-reversible-mean/">可逆计算理论中的可逆到底指的是什么？</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/what-is-data-driven/">什么是数据驱动？它和模型驱动、领域驱动、元数据驱动、DSL驱动之间有什么区别？</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/why-nop-report-is-special/">NopReport为什么是一个非常独特的报表引擎？</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/why-xml/">为什么Nop平台坚持使用XML而不是JSON或者YAML</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/xdsl-design/">从可逆计算看DSL的设计要点</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/xml-json-equivalence/">XML、JSON和函数AST的等价性</a> </li> <li> <span>theory/amis</span> <ul> <li> <a href="/projects/nop-entropy/docs/theory/amis/amis-and-declarative-programming/">再谈百度AMIS框架和声明式编程</a> </li> <li> <a href="/projects/nop-entropy/docs/theory/amis/why-amis-is-good/">为什么说百度AMIS框架是一个优秀的设计</a> </li> </ul> </li> </ul> </li> <li> <span>tutorial</span> <ul> <li> <a href="/projects/nop-entropy/docs/tutorial/tutorial/">开发示例</a> </li> <li> <a href="/projects/nop-entropy/docs/tutorial/tutorial_en/">Development Tutorial</a> </li> <li> <span>tutorial/simple</span> <ul> <li> <a href="/projects/nop-entropy/docs/tutorial/simple/1-simple-service/">Nop入门：极简服务层开发</a> </li> <li> <a href="/projects/nop-entropy/docs/tutorial/simple/2-simple-dao/">Nop入门：极简数据访问层开发</a> </li> <li> <a href="/projects/nop-entropy/docs/tutorial/simple/3-simple-page/">极简前端页面开发</a> </li> </ul> </li> </ul> </li> <li> <span>user-guide</span> <ul> <li> <a href="/projects/nop-entropy/docs/user-guide/">用户指南</a> </li> <li> <a href="/projects/nop-entropy/docs/user-guide/batch/">user-guide/batch.md</a> </li> <li> <a href="/projects/nop-entropy/docs/user-guide/report/">采用Excel作为设计器的开源中国式报表引擎：NopReport</a> </li> <li> <a href="/projects/nop-entropy/docs/user-guide/rule/">user-guide/rule.md</a> </li> <li> <a href="/projects/nop-entropy/docs/user-guide/workflow/">user-guide/workflow.md</a> </li> <li> <span>user-guide/idea</span> <ul> <li> <a href="/projects/nop-entropy/docs/user-guide/idea/idea-plugin/">XLang DSL Plugin</a> </li> </ul> </li> <li> <span>user-guide/monitor</span> <ul> <li> <a href="/projects/nop-entropy/docs/user-guide/monitor/grafana/">运行时监控</a> </li> </ul> </li> </ul> </li> </ul> </nav> </aside> <main class="Page-main"> <article class="Article container-fluid"> <header class="Article-header"> <h1 class="Article-title">Nop平台与SpringCloud的功能对比</h1> </header> <div class="Article-content col-md-9"><p>Nop平台是根据可逆计算原理从零开始设计并实现的新一代的低代码平台，它的目标并不是针对少数固化的场景提供预置的开发脚手架和可视化设计工具， 而是打破描述式编程和传统命令式编程之间人为制造的藩篱，建立两者无缝相容的一种新的编程范式。不断扩大描述式编程所覆盖的语义空间。为了以最低的技术成本达到这一目标， Nop平台没有采用目前业内主流的基础开源框架，而是选择了基于可逆计算原理重塑整个技术体系。本文将简单列举一下Nop平台所造的轮子，并与SpringCloud技术体系中现有的轮子做个对比。</p> <table> <thead> <tr> <th>轮子</th> <th>Nop体系</th> <th>Spring体系</th> </tr> </thead> <tbody> <tr> <td>Web框架</td> <td>NopGraphQL</td> <td>SpringMVC</td> </tr> <tr> <td>表达式引擎</td> <td>XLang XScript</td> <td>SpringEL</td> </tr> <tr> <td>模板引擎</td> <td>XLang Xpl</td> <td>Velocity/Freemarker</td> </tr> <tr> <td>ORM引擎</td> <td>NopORM</td> <td>JPA/Mybatis</td> </tr> <tr> <td>IoC容器</td> <td>NopIoC</td> <td>SpringIoC</td> </tr> <tr> <td>动态配置</td> <td>NopConfig</td> <td>SpringConfig</td> </tr> <tr> <td>分布式事务</td> <td>NopTcc</td> <td>Alibaba Seata</td> </tr> <tr> <td>自动化测试</td> <td>NopAutoTest</td> <td>SpringBootTest</td> </tr> <tr> <td>分布式RPC</td> <td>NopRPC</td> <td>Feign RPC</td> </tr> <tr> <td>报表引擎</td> <td>NopReport</td> <td>JasperReport</td> </tr> <tr> <td>规则引擎</td> <td>NopRule</td> <td>Drools</td> </tr> <tr> <td>批处理引擎</td> <td>NopBatch</td> <td>SpringBatch</td> </tr> <tr> <td>工作流引擎</td> <td>NopWorkflow</td> <td>Flowable/BPM</td> </tr> <tr> <td>任务调度</td> <td>NopJob</td> <td>Quartz</td> </tr> <tr> <td>XML/JSON解析</td> <td>NopCore</td> <td>Jaxb/Jackson</td> </tr> <tr> <td>资源抽象</td> <td>NopResource</td> <td>Spring Resource</td> </tr> <tr> <td>代码生成器</td> <td>NopCodeGen</td> <td>各类自制生成器</td> </tr> <tr> <td>IDE插件</td> <td>NopIdeaPlugin</td> <td>Mybatis插件/Spring插件等</td> </tr> </tbody> </table> <p>Nop平台可以直接作为类似SpringCloud的基础开发框架来使用，在ProCode层面也可以极大简化软件开发过程，并明显提升软件的可扩展性。</p> <h2 id="ioc">一. IoC容器</h2> <p>声明式的IoC容器是Spring发家时的基本技能。但是自从Spring2.0版本之后，SpringIoC就逐渐失去了它的声明式特性，导致现在它的执行掺杂了大量命令式逻辑，典型的体现就是：<strong>改变Spring中包扫描的顺序会以微妙的方式改变bean装配的结果</strong>。</p> <p>NopIoC是在Spring1.0的装配语法的基础上补充了类似SpringBoot的条件装配逻辑，最终运行时完全归约为Spring1.0的语法来执行。<strong>beans文件的装载顺序以及bean的声明顺序不会影响到最终装配的结果</strong>。</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>@ConditionOnMissingBean
@ConditionOnProperty(&quot;test.my-bean.enabled&quot;)
@Component
public class MyBean{
    @Inject
    OtherBean other;
}</code></pre></figure> <p>对应于NopIoC的如下配置</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;myBean&quot;</span> <span class="na">ioc:default=</span><span class="s">&quot;true&quot;</span> <span class="na">class=</span><span class="s">&quot;test.MyBean&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ioc:condition&gt;</span>
     <span class="nt">&lt;if-property</span> <span class="na">name=</span><span class="s">&quot;test.my-bean.enabled&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/ioc:condition&gt;</span>
<span class="nt">&lt;/bean&gt;</span></code></pre></figure> <p>NopIoC支持<code>@Inject</code>,<code>@PostConstruct</code>,<code> @PreDestroy</code>等规范化注解，也兼容Spring特有的<code>@Autowired</code>注解。但是它不使用包扫描来发现bean的定义，而是要求在beans.xml文件中声明bean。</p> <p>因为Nop平台大量使用模型驱动来动态生成代码，所以大量bean的定义会自动被生成到配置文件中，需要手工编写的配置内容其实很少。另外自己也可以写一个扩展扫描函数，利用NopIoC的元编程机制来动态生成bean的定义。例如</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;beans&gt;</span>
   <span class="nt">&lt;x:gen-extends&gt;</span>
      <span class="nt">&lt;ioc-gen:scan</span> <span class="na">packages=</span><span class="s">&quot;test.my,test.other&quot;</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/x:gen-extends&gt;</span>
<span class="nt">&lt;/beans&gt;</span></code></pre></figure> <h3 id="bean">Bean的定制</h3> <p>NopIoC的独特之处在于<strong>可以通过标准的Delta定制来实现对装配逻辑的定制</strong>，例如可以通过如下代码<strong>删除已有的bean的定义</strong>。</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;beans</span> <span class="na">x:extends=</span><span class="s">&quot;super&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">x:override=</span><span class="s">&quot;remove&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/beans&gt;</span></code></pre></figure> <h3 id="section">动态配置</h3> <p>NopIoC的设计中包含了与NopConfig配置中心的一体化设计。在beans.xml配置中可以通过特殊的前缀表示动态配置项：</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;xx&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;poolSize&quot;</span> <span class="na">value=</span><span class="s">&quot;@r-cfg:my.pool-size|5&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span></code></pre></figure> <p><code>@r-cfg:</code>前缀表示是动态配置项，当配置中心更改配置时会自动更新bean的属性。</p> <p>另外在beans语法中还定义专门的ioc:config节点</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;ioc:config</span> <span class="na">id=</span><span class="s">&quot;nopOrmGlobalCacheConfig&quot;</span> <span class="na">class=</span><span class="s">&quot;io.nop.commons.cache.CacheConfig&quot;</span>
    <span class="na">ioc:config-prefix=</span><span class="s">&quot;nop.orm.global-cache&quot;</span>  <span class="na">ioc:default=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span></code></pre></figure> <p>NopIoC容器会自动跟踪所有对于<code>ioc:config</code>的引用，一旦配置发生变化，会自动触发那些使用config的bean上所定义的refresh-config方法。</p> <p>ioc:config-prefix的作用类似于Spring中<code>@ConfigurationProperties</code>，用于指定配置项在配置文件中所对应的前缀。</p> <h3 id="springioc">与SpringIoC的互操作</h3> <p>NopIoC与Spring容器可以同时使用，一般情况下NopIoC会在SpringIoC初始化之后再启动，它可以通过parentContainer拿到Spring容器所管理的bean。所以在NopIoC中可以通过<code>@Inject</code>直接注入Spring所管理的bean，而在Spring所管理的bean中，可以使用beanContainer来按照名称或者类型获取NopIoC所管理的bean。</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">BeanContainer</span><span class="p">.</span><span class="na">intance</span><span class="p">().</span><span class="na">getBean</span><span class="p">(</span><span class="n">beanName</span><span class="p">)</span>
<span class="n">BeanContainer</span><span class="p">.</span><span class="na">intance</span><span class="p">().</span><span class="na">getBeanByType</span><span class="p">(</span><span class="n">beanType</span><span class="p">)</span></code></pre></figure> <p>NopIoC的设计目标是成为一个更好的SpringIoC，它坚持了严格的声明式设计，可以集成到Spring生态中使用，全部代码不超过5000行。更详细的设计可以参见文章： <a href="https://zhuanlan.zhihu.com/p/579847124" target="_blank" rel="external nofollow">如果重写SpringBoot，我们会做哪些不同的选择？</a></p> <h2 id="web">二. Web框架</h2> <p>在SpringCloud的技术体系中，我们一般是在Controller中调用Service来完成具体业务逻辑，而在Controller中会处理一些对象结构转换或者组合的工作，例如将实体对象转换为DTO对象等。为了实现GraphQL服务接口，我们需要使用graphql-java包重新编写接口层代码，并不能直接复用Controller对外提供服务。</p> <p>NopGraphQL引擎极大简化了服务接口层的设计，一般情况下我们<strong>可以直接把领域模型对象暴露为对外服务接口，通过元数据层实现权限管控和结构适配，而无需通过Controller层实现适配转换</strong>。</p> <p>例如，即使对于最简单的Web服务，我们也需要指定url模式，指定参数传递方式（是通过param传递，还是通过path传递，或者是通过body传递）。很多时候还会在无意中引入对HttpServlet接口的依赖，导致整个服务与具体的Web运行时环境绑定。</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@RestController</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyController</span><span class="p">{</span>
    <span class="nd">@PostMapping</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;/echo/{id}&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">echo</span><span class="p">(</span><span class="nd">@QueryParam</span><span class="p">(</span><span class="s">&quot;msg&quot;</span><span class="p">)</span> <span class="n">String</span> <span class="n">msg</span><span class="p">,</span>
                 <span class="nd">@PathParam</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">)</span> <span class="n">String</span> <span class="n">id</span><span class="p">,</span> <span class="n">HttpServletRequest</span> <span class="n">request</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s">&quot;Hello Nacos Discovery &quot;</span> <span class="o">+</span> <span class="n">msg</span> <span class="o">+</span> <span class="s">&quot;,id=&quot;</span> <span class="o">+</span> <span class="n">id</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure> <p>在Nop平台中，我们只需要在领域模型对象上增加<code>@BizModel</code>注解，然后标记服务方法及服务参数的名称即可。</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>@BizModel(&quot;MyObject&quot;)
public class MyObjectBizModel{
    @BizQuery
    public PageBean<span class="nt">&lt;MyEntity&gt;</span> findPage(@Name(&quot;id&quot;) id,
             FieldSelection selection, IServiceContext ctx){
       return ....
    }
}</code></pre></figure> <ol> <li> <p>NopGraphQL可以提供REST服务，但是它约定了固定的url模式：<code>/r/{bizObjName}__{bizAction}</code>，无需为每个请求单独设计链接模式。</p> </li> <li> <p>标记了@BizQuery注解的函数可以通过POST和GET方式来访问，而标记了@BizMutation的方法只支持POST方式访问。这种自动推导也避免了误用。</p> </li> <li> <p>对于参数只需要通过@Name注解来标记参数名，无需指定参数传递方式</p> </li> <li> <p>标记为@BizMutation的函数会自动启用事务管理，无需额外标记@Transactional</p> </li> </ol> <h3 id="graphql">GraphQL作为通用分解组合方案</h3> <p><img src="/assets/knosys/project-nop-entropy/compare/graphql-engine-24858fd1137f21fd59fa09f2ba54592c0b4b1f47ded5fad116c02cfe9a29d1a5.png" alt="" /></p> <p>NopGraphQL引擎不仅仅可以同时提供GraphQL和REST两种服务模式，它在Nop平台中的作用是作为一个通用的分解组合方案。在Nop平台中，所有的消息服务、批处理服务、RPC服务等，<strong>在接收到请求消息之后，都是把它们投递到GraphQLEngine中去处理</strong>。</p> <p>一般的Web框架的服务方法都不支持直接返回实体对象，因为一般实体对象上包含过多的信息，并不适合直接序列化到前台。但是<strong>在GraphQL引擎的协调下，服务方法的返回值并不会直接作为结果数据返回给前台，而是要经过selection和Data Loader的增强处理</strong>。基于这种情况，NopGraphQL将结果转换和适配工作完全交给GraphQL引擎（根据XMeta提供的元数据）去处理。也就是说可以通过配置的方式实现适配层，而无需单独设计的Controller适配层。</p> <p>NopGraphQL引擎可以脱离Web环境，在任何需要工作分解和结果选择、适配的场景下使用。它提供了与运行时无关的IServiceContext上下文对象（基本等价于一个Map），可以利用它缓存在多个服务调用之间共享的数据，优化批处理的性能。</p> <h3 id="rpc">分布式RPC</h3> <p>在SpringCloud的技术体系中，服务端启动时自动注册到服务注册中心，然后在客户端增加Feign接口，就可以实现负载均衡调用，灰度发布、AB测试等都可以利用这里的服务路由机制来实现。</p> <p>在NopGraphQL中，我们也是增加服务调用接口，</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">RuleService</span><span class="p">{</span>

        <span class="n">CompletionStage</span><span class="o">&lt;</span><span class="n">ApiResponse</span><span class="o">&lt;</span><span class="n">RuleResultBean</span><span class="o">&gt;&gt;</span> <span class="nf">executeRuleAsync</span><span class="p">(</span><span class="n">ApiRequest</span><span class="o">&lt;</span><span class="n">RuleRequestBean</span><span class="o">&gt;</span> <span class="n">request</span><span class="p">);</span>

        <span class="k">default</span> <span class="n">ApiResponse</span><span class="o">&lt;</span><span class="n">RuleResultBean</span><span class="o">&gt;</span> <span class="nf">executeRule</span><span class="p">(</span><span class="n">ApiRequest</span><span class="o">&lt;</span><span class="n">RuleRequestBean</span><span class="o">&gt;</span> <span class="n">request</span><span class="p">){</span>
            <span class="k">return</span> <span class="n">FutureHelper</span><span class="p">.</span><span class="na">syncGet</span><span class="p">(</span><span class="n">executeRuleAsync</span><span class="p">(</span><span class="n">request</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span></code></pre></figure> <ol> <li> <p>服务接口支持异步调用和同步调用模式，异步调用约定返回类型为CompletionStage，而且方法名增加后缀Async。</p> </li> <li> <p>约定请求参数为ApiRequest类型，而返回结果为ApiResponse类型，这样可以在消息对象层面直接设置和读取headers扩展数据，而无需依赖底层的运行时接口。</p> </li> <li> <p>在服务接口上无需增加额外注解，比如不用增加@Path等REST路径声明等</p> </li> </ol> <p>在beans.xml中通过如下配置创建分布式RPC客户端</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;testGraphQLRpc&quot;</span> <span class="na">parent=</span><span class="s">&quot;AbstractRpcProxyFactoryBean&quot;</span>
          <span class="na">ioc:type=</span><span class="s">&quot;io.nop.rpc.client.TestRpc&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;serviceName&quot;</span> <span class="na">value=</span><span class="s">&quot;rpc-demo-consumer&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span></code></pre></figure> <p>通过设置nop.rpc.service-mesh.enabled=true，可以启用服务网格模式，跳过客户端负载均衡代理。</p> <p>详细介绍可以参见文章：</p> <ol> <li> <p><a href="https://zhuanlan.zhihu.com/p/589565334" target="_blank" rel="external nofollow">低代码平台中的GraphQL引擎</a></p> </li> <li> <p><a href="https://zhuanlan.zhihu.com/p/631686718" target="_blank" rel="external nofollow">低代码平台中的分布式RPC框架(约3000行代码)</a></p> </li> </ol> <h2 id="section-1">三. 存储层</h2> <p>NopORM引擎包含了SpringData, JPA以及MyBatis的大部分功能，同时补充了大量业务开发中的常用功能，例如字段加密、逻辑删除、修改历史跟踪、扩展字段、多租户等。</p> <p>在使用接口层面，NopORM的使用模式与Spring中非常类似，只是它总是使用XML模型文件而不是JPA注解。</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">IEntityDao</span><span class="o">&lt;</span><span class="n">NopAuthUser</span><span class="o">&gt;</span> <span class="n">dao</span> <span class="o">=</span> <span class="n">daoProvider</span><span class="p">.</span><span class="na">daoFor</span><span class="p">(</span><span class="n">NopAuthUser</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>


<span class="n">MyEntity</span> <span class="n">example</span> <span class="o">=</span> <span class="n">dao</span><span class="p">.</span><span class="na">newEntity</span><span class="p">();</span>
<span class="n">example</span><span class="p">.</span><span class="na">setMyField</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">);</span>
<span class="c1">// 查找满足条件的第一个</span>
<span class="n">MyEntity</span> <span class="n">entity</span> <span class="o">=</span> <span class="n">dao</span><span class="p">.</span><span class="na">findFirstByExample</span><span class="p">(</span><span class="n">example</span><span class="p">);</span>

<span class="n">QueryBean</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QueryBean</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">setFilter</span><span class="p">(</span><span class="n">and</span><span class="p">(</span><span class="n">eq</span><span class="p">(</span><span class="n">MyEntity</span><span class="p">.</span><span class="na">PROP_NAME_myField</span><span class="p">,</span><span class="s">&quot;a&quot;</span><span class="p">),</span> <span class="n">gt</span><span class="p">(</span><span class="n">MyEntity</span><span class="p">.</span><span class="na">PROP_NAME_myStatus</span><span class="p">,</span><span class="mi">3</span><span class="p">)));</span>
<span class="n">query</span><span class="p">.</span><span class="na">setLimit</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">MyEntity</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">dao</span><span class="p">.</span><span class="na">findPageByQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span></code></pre></figure> <p>一般情况下内置的IEntityDao上提供的方法已经足够的丰富，可以通过它支持非常复杂的查询条件，因此没有必要单独为每个实体生成独立的Dao接口，一般都是通过DaoProvider获取到对应的IEntityDao接口来使用。</p> <p>对于复杂查询语句，可以直接使用类似MyBatis的sql-lib机制，通过XML模型来管理复杂动态SQL。</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@SqlLibMapper</span><span class="p">(</span><span class="s">&quot;/app/mall/sql/LitemallGoods.sql-lib.xml&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">LitemallGoodsMapper</span> <span class="p">{</span>
    <span class="kt">void</span> <span class="nf">syncCartProduct</span><span class="p">(</span><span class="nd">@Name</span><span class="p">(</span><span class="s">&quot;product&quot;</span><span class="p">)</span> <span class="n">LitemallGoodsProduct</span> <span class="n">product</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure> <p>在Mapper接口上增加@SqlLibMapper注解来定义sql-lib模型与Java接口的映射关系。</p> <p>在sql-lib模型中，可以通过Xpl模板语言来生成SQL语句</p> <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;eql</span> <span class="na">name=</span><span class="s">&quot;syncCartProduct&quot;</span> <span class="na">sqlMethod=</span><span class="s">&quot;execute&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;product&quot;</span><span class="nt">/&gt;</span>

            <span class="nt">&lt;source&gt;</span>
                update LitemallCart o
                set o.price = ${product.price},
                  o.goodsName = ${product.goods.name},
                  o.picUrl = ${product.url},
                  o.goodsSn = ${product.goods.goodsSn}
                where o.productId = ${product.id}
            <span class="nt">&lt;/source&gt;</span>
        <span class="nt">&lt;/eql&gt;</span></code></pre></figure> <h3 id="excel">Excel模型驱动</h3> <p>Nop平台提供了非常强大的模型驱动开发模式，可以解析Excel数据模型文件自动生成实体定义、Mapper接口定义、元数据定义，后台GraphQL服务，甚至包括前台增加改查页面等。</p> <p><img src="/assets/knosys/project-nop-entropy/tutorial/excel-model-45a1da824547b1e2b092456bb7993735c9440e39756d014cef7dfb4a88acc99e.png" alt="" /></p> <p>详细设计可以参见文章</p> <ol> <li> <p><a href="https://zhuanlan.zhihu.com/p/545063021" target="_blank" rel="external nofollow">低代码平台需要什么样的ORM引擎?(2)</a></p> </li> <li> <p><a href="https://zhuanlan.zhihu.com/p/540022264" target="_blank" rel="external nofollow">数据驱动的差量化代码生成器</a></p> </li> <li> <p><a href="https://zhuanlan.zhihu.com/p/612433693" target="_blank" rel="external nofollow">基于可逆计算理论的开源低代码平台：Nop Platform</a></p> </li> <li> <p><a href="https://zhuanlan.zhihu.com/p/618851796" target="_blank" rel="external nofollow">低代码平台如何在不改表的情况下为实体增加扩展字段</a></p> </li> </ol> <h2 id="section-2">四. 底层语言</h2> <p>Nop平台提供了专为DSL开发而设计的XLang语言，它包含了XScript脚本语言，Xpl模板语言，XTransform结构转换语言，XDef元模型定义语言等多个子语言。其中</p> <ol> <li> <p>XScript脚本语言的语法类似于JavaScript语法，并支持类似Java的类型系统，可以作为一般性的表达式语言来使用。</p> </li> <li> <p>Xpl模板语言是类似于FreeMarker的模板语言，支持自定义标签库，支持编译期宏处理。</p> </li> <li> <p>XDef元模型定义语言类似于XML Schema模式定义语言，是一种非常简单直观的元模型定义语言。</p> </li> <li> <p>XTransform是类似于XSLT的通用Tree结构转换语言。</p> </li> </ol> <p><img src="/assets/knosys/project-nop-entropy/compare/XLang-6640135cfe629e158d950da669d633344c957a76b51254c7e18ac278056938e2.png" alt="" /></p> <p>Nop平台底层对于XML语言进行了很多改造，它只是使用基本的XML语法形式，并没有使用JAXB标准，也没有使用Java中常用的XML解析器，而是完全从零编写了XML解析器和JSON解析器。相比于常用的XML解析器和DOM模型，Nop平台的XNode结构要更加简单、直观，并且它内置SourceLocation跟踪机制，可以直接作为通用的AST语法树节点来使用。</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">XNode</span> <span class="n">node</span> <span class="o">=</span> <span class="n">XNodeParser</span><span class="p">.</span><span class="na">instance</span><span class="p">().</span><span class="na">parseFromText</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">text</span><span class="p">);</span>

<span class="n">node</span><span class="p">.</span><span class="na">getTagName</span><span class="p">()</span> <span class="c1">// 读取标签名</span>
<span class="n">node</span><span class="p">.</span><span class="na">getAttr</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="c1">// 读取属性</span>
<span class="n">node</span><span class="p">.</span><span class="na">setAttr</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">value</span><span class="p">)</span> <span class="c1">// 设置属性</span>

<span class="n">node</span><span class="p">.</span><span class="na">attrText</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="c1">// 得到文本属性，如果文本值为空，则返回null而不是空串</span>
<span class="n">node</span><span class="p">.</span><span class="na">attrTextOrEmpty</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="c1">// 如果属性值为空，则返回null。属性值不存在时返回null</span>
<span class="n">node</span><span class="p">.</span><span class="na">attrInt</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="c1">//  得到属性值并转换为Integer类型</span>
<span class="n">node</span><span class="p">.</span><span class="na">attrInt</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">defaultValue</span><span class="p">)</span> <span class="c1">// 如果属性值为空，则返回缺省值</span>
<span class="n">node</span><span class="p">.</span><span class="na">attrBoolean</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="c1">// 读取属性值并转换为Boolean类型</span>
<span class="n">node</span><span class="p">.</span><span class="na">attrLong</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="c1">// 读取属性值并转换为Long类型</span>
<span class="n">node</span><span class="p">.</span><span class="na">attrCsvSet</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="c1">// 读取属性值，如果是字符串，则按照逗号分隔转换字符串集合</span>


<span class="n">node</span><span class="p">.</span><span class="na">getAttrs</span><span class="p">()</span> <span class="c1">// 得到属性集合</span>
<span class="n">node</span><span class="p">.</span><span class="na">getChildren</span><span class="p">()</span> <span class="c1">// 得到子节点集合</span>
<span class="n">node</span><span class="p">.</span><span class="na">childByTag</span><span class="p">(</span><span class="n">tagName</span><span class="p">)</span> <span class="c1">// 根据子节点名查找得到对应子节点</span>
<span class="n">node</span><span class="p">.</span><span class="na">childByAttr</span><span class="p">(</span><span class="n">attrName</span><span class="p">,</span> <span class="n">attrValue</span><span class="p">)</span> <span class="c1">// 根据属性值查找得到子节点</span>
<span class="n">node</span><span class="p">.</span><span class="na">getContentValue</span><span class="p">()</span> <span class="c1">// 读取节点值</span>

<span class="n">node</span><span class="p">.</span><span class="na">hasChild</span><span class="p">()</span> <span class="c1">// 是否有子节点</span>
<span class="n">node</span><span class="p">.</span><span class="na">hasAttr</span><span class="p">()</span> <span class="c1">// 是否有属性</span>
<span class="n">node</span><span class="p">.</span><span class="na">hasContent</span><span class="p">()</span> <span class="c1">// 直接内容是否不为空</span>
<span class="n">node</span><span class="p">.</span><span class="na">hasBody</span><span class="p">()</span>  <span class="c1">// 是否有子节点或者直接内容</span>

<span class="n">node</span><span class="p">.</span><span class="na">getParent</span><span class="p">()</span> <span class="c1">// 得到父节点</span>

<span class="n">node</span><span class="p">.</span><span class="na">cloneInstance</span><span class="p">()</span> <span class="c1">// 复制节点</span>

<span class="n">list</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="na">cloneChildren</span><span class="p">()</span> <span class="c1">// 复制所有子节点</span>

<span class="n">node</span><span class="p">.</span><span class="na">detach</span><span class="p">()</span> <span class="c1">// 解除父子关系</span>

<span class="n">node</span><span class="p">.</span><span class="na">remove</span><span class="p">()</span> <span class="c1">// 从父节点中删除</span>

<span class="n">node</span><span class="p">.</span><span class="na">replaceBy</span><span class="p">(</span><span class="n">newNode</span><span class="p">)</span> <span class="c1">// 在父节点的children集合中将本节点替换为newNode</span>


<span class="n">node</span><span class="p">.</span><span class="na">xml</span><span class="p">()</span> <span class="c1">// 得到节点的XML文本</span>
<span class="n">node</span><span class="p">.</span><span class="na">innerXml</span><span class="p">()</span> <span class="c1">// 得到节点内部对应的XML文本</span>

<span class="n">node</span><span class="p">.</span><span class="na">toTreeBean</span><span class="p">()</span> <span class="c1">// 转换为TreeBean对象</span>

<span class="n">XNode</span><span class="p">.</span><span class="na">fromTreeBean</span><span class="p">(</span><span class="n">treeBean</span><span class="p">)</span> <span class="c1">// 从TreeBean转换为XNode</span></code></pre></figure> <p>与Spring生态的表达式语言和模板语言相比，Nop平台XLang语言的设计一致性更强，</p> <ol> <li> <p>多个子语言共用大量的语法特性</p> </li> <li> <p>多个子语言共用全局函数库</p> </li> <li> <p>可以将一般的Java函数注册为全局函数</p> </li> <li> <p>语法类似于JavaScript，支持对象函数调用</p> </li> <li> <p>提供了一个很容易定制的表达式解析器SimpleExprParser。在报表引擎中使用ReportExprParser以及在规则引擎中使用的RuleExprParser都是基于这个表达式引擎定制而来。</p> </li> <li> <p>系统化的支持编译期元编程机制，例如支持宏函数、宏标签等</p> </li> </ol> <p>进一步的详细信息可以参考文章：</p> <ol> <li> <p><a href="https://zhuanlan.zhihu.com/p/652413095" target="_blank" rel="external nofollow">低代码平台中的元编程(Meta Programming)</a>,</p> </li> <li> <p><a href="https://zhuanlan.zhihu.com/p/652191061" target="_blank" rel="external nofollow">替代XSD的统一元模型定义语言:XDef</a>,</p> </li> <li> <p><a href="https://zhuanlan.zhihu.com/p/646144092" target="_blank" rel="external nofollow">从可逆计算看DSL的设计要点</a></p> </li> </ol> <h2 id="section-3">五. 导入导出</h2> <p>NopReport是基于可逆计算理论从零开始独立实现的一套开源中国式报表引擎，它的核心代码很短，只有3000多行（参见<a href="https://link.zhihu.com/?target=https%3A//gitee.com/canonical-entropy/nop-entropy/tree/master/nop-report/nop-report-core" target="_blank" rel="external nofollow">nop-report-core</a>模块），具有较高的性能（性能测试代码参见<a href="https://link.zhihu.com/?target=https%3A//gitee.com/canonical-entropy/nop-entropy/blob/master/nop-report/nop-report-demo/src/test/java/io/nop/report/demo/TestReportSpeed.java" target="_blank" rel="external nofollow">TestReportSpeed.java</a>），以及其他报表引擎难以达到的灵活性和可扩展性。</p> <p>NopReport在<a href="https://link.zhihu.com/?target=https%3A//gitee.com/canonical-entropy/nop-entropy" target="_blank" rel="external nofollow">Nop平台</a>中的定位是对表格形式数据结构的通用建模工具，所有需要生成表格形式数据的功能都可以转化为NopReport报表模型对象来实现。例如，NopCli命令行工具提供的数据库逆向工程命令会逆向分析数据库表结构，生成Excel模型文件，这个Excel模型文件就是通过<strong>将导入模板转化为报表输出模型</strong>来生成。</p> <p><img src="/assets/knosys/project-nop-entropy/user-guide/report/cross-table-report-result-ca1af57f4ba4da00ea3ac3864ed63d05c17d6f2f6007bacd06207b09499e5449.png" alt="" /></p> <p><img title="" src="/assets/knosys/project-nop-entropy/user-guide/report/cross-table-report-43d231b5a6bdf6fdc716ee44694b7251c8dd9622488b43c60354d06f89114e45.png" alt="" width="499" /></p> <p>与其他报表引擎相比，NopReport具有如下非常鲜明的个性化特点：</p> <ol> <li> <p>采用Excel作为模板设计器</p> </li> <li> <p>可以直接采用领域模型对象作为数据对象，而数据集(DataSet)仅仅是一种可选的数据对象形式。（一般的报表引擎只能使用表格数据）</p> </li> <li> <p>在通用的表达式语法基础上扩展层次坐标概念，而不是使用专门设计的报表表达式语法</p> </li> <li> <p>支持多Sheet和循环生成</p> </li> </ol> <p>NopReport除了用于导出数据之外，它还支持自定义数据结构的导入。无需编程，只需要少量配置即可实现Excel数据模型的导入。Nop平台中所有使用的Excel模型文件，例如ORM实体模型，API接口模型等都是使用这里的报表导入机制实现导入。</p> <p>详细介绍可以参见：</p> <ol> <li> <p><a href="https://zhuanlan.zhihu.com/p/620250740" target="_blank" rel="external nofollow">采用Excel作为设计器的开源中国式报表引擎：NopReport</a></p> </li> <li> <p><a href="https://zhuanlan.zhihu.com/p/537439335" target="_blank" rel="external nofollow">如何用800行代码实现类似poi-tl的可视化Word模板</a></p> </li> <li> <p><a href="https://www.bilibili.com/video/BV1M14y1271a/" target="_blank" rel="external nofollow">导入导出Excel时如何支持动态列和动态样式</a></p> </li> </ol> <h2 id="section-4">六. 逻辑编排</h2> <p>Nop平台提供了业务规则、工作流引擎、批处理引擎、任务调度引擎等逻辑编排相关的引擎实现，可以对一般的业务逻辑进行完整的描述。</p> <p><img src="/assets/knosys/project-nop-entropy/dev-guide/rule/decision-matrix-2bedb9a1928310835fa2a6739fbe7126a17b62255b4022d140fb094a410acad2.png" alt="" /></p> <p>具体介绍可以参见 <a href="https://zhuanlan.zhihu.com/p/655192140" target="_blank" rel="external nofollow">采用Excel作为可视化设计器的规则引擎 NopRule</a></p> <h2 id="section-5">七. 自动化测试</h2> <p>SprintBootTest提供了Spring框架与JUnit等测试框架的集成。在Nop平台中，从JunitAutoTest基类继承即可使用依赖注入来得到需要测试的Bean。</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@NopTestConfig</span><span class="p">(</span><span class="n">localDb</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span><span class="n">initDatabaseSchema</span> <span class="o">=</span> <span class="kc">true</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestGraphQLTransaction</span> <span class="kd">extends</span> <span class="n">JunitAutoTestCase</span> <span class="p">{</span>
    <span class="nd">@Inject</span>
    <span class="n">IDaoProvider</span> <span class="n">daoProvider</span><span class="p">;</span>

    <span class="nd">@Inject</span>
    <span class="n">IGraphQLEngine</span> <span class="n">graphQLEngine</span><span class="p">;</span>

    <span class="nd">@EnableSnapshot</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testRollback</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">GraphQLRequestBean</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GraphQLRequestBean</span><span class="p">();</span>
        <span class="n">request</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="s">&quot;mutation { DemoAuth__testFlushError }&quot;</span><span class="p">);</span>
        <span class="n">IGraphQLExecutionContext</span> <span class="n">context</span> <span class="o">=</span> <span class="n">graphQLEngine</span><span class="p">.</span><span class="na">newGraphQLContext</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
        <span class="n">GraphQLResponseBean</span> <span class="n">response</span> <span class="o">=</span> <span class="n">graphQLEngine</span><span class="p">.</span><span class="na">executeGraphQL</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>
        <span class="n">output</span><span class="p">(</span><span class="s">&quot;response.json5&quot;</span><span class="p">,</span> <span class="n">response</span><span class="p">);</span>
        <span class="n">assertTrue</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">hasError</span><span class="p">());</span>
        <span class="n">assertTrue</span><span class="p">(</span><span class="n">daoProvider</span><span class="p">.</span><span class="na">daoFor</span><span class="p">(</span><span class="n">NopAuthRole</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">getEntityById</span><span class="p">(</span><span class="s">&quot;test123&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">null</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure> <p>通过@NopTestConfig注解可以很简单的控制自动化测试相关的一些配置开关。</p> <p>NopAutoTest自动化测试框架的独特之处是它<strong>提供了模型驱动的自动化测试能力，可以通过录制、回放机制实现复杂业务功能的自动化测试</strong>，无需手工编写测试代码。</p> <p>具体设计参见 <a href="https://zhuanlan.zhihu.com/p/569315603" target="_blank" rel="external nofollow">低代码平台中的自动化测试</a></p> <h2 id="section-6">八. 外围工具</h2> <p>Nop平台提供了与Maven相集成的代码生成器，它<strong>可以在Nop平台之外独立使用，基于用户自定义的模型文件，应用用户自定义的代码模板，以增量化的方式生成指定代码</strong>。而一般的代码生成器，无论是模型还是代码模板都很难支持细粒度的定制。</p> <p>详细设计参见 <a href="https://zhuanlan.zhihu.com/p/540022264" target="_blank" rel="external nofollow">数据驱动的差量化代码生成器</a></p> <p>NopIdeaPlugin提供了一个通用的IDEA插件，它会自动识别XML根节点上x:schema属性所指定的元模型，然后根据元模型自动实现属性提示、链接跳转、格式校验等，对于代码段还提供了断点调试功能。</p> <p><img src="/assets/knosys/project-nop-entropy/user-guide/idea/idea-completion-ffa1152a373ac33e2ccb1acf5f9e61d1aaff620b3b4867f077bb684d98719ac3.jpg" alt="" /></p> <p><img src="/assets/knosys/project-nop-entropy/user-guide/idea/xlang-debugger-555eb3b4bfc7bfc287e78bd1999f87a48787ce1233fa506b41c0ec721b947653.png" alt="" /></p> <h2 id="section-7">总结</h2> <p>Nop平台的实现与SpringCloud相比，主要有如下特点：</p> <ol> <li> <p>实现原理简单直接，代码量普遍比Spring框架中的组件小一个数量级以上，但是核心功能反而更加丰富</p> </li> <li> <p>支持差量化定制，可以在Delta目录下增加Delta模型文件来定制所有已有功能（包括平台内置功能），例如所有的数据模型、所有的设计器页面都可以自由定制。</p> </li> <li> <p>利用代码生成、元编程等机制实现自动推导，极大降低需要手工编写的代码量，保证系统内部信息结构的高度一致性。</p> </li> <li> <p>统一使用XDSL规范来实现模型DSL，可以随时新增DSL模型，也可以在原有DSL模型中增加新的扩展属性。IDE插件自动识别并支持新的DSL模型，无需特殊编写支持插件。</p> </li> <li> <p>模型驱动集成在DevOps开发流程中，在maven打包过程中实现代码生成、模型转换等，不需要单独部署模型管理平台。</p> </li> </ol> <p>Nop平台可以作为运行在SpringCloud之上的一种扩展组件，它与SpringCloud内置机制并不冲突，它内部的各种组件也可以被替换为SpringCloud的实现，只是会丢失很多高级特性、损失性能、损失扩展性，破坏程序结构的可推理性。</p> </div> <footer class="Article-footer col-md-3"> <div class="Widget" data-url="/projects/nop-entropy/docs/compare/nop-vs-springcloud/" data-path="_knosys/project-nop-entropy/compare/nop-vs-springcloud.md"> <div class="Widget-body"><a href="https://gitee.com/canonical-entropy/nop-entropy/edit/master/docs/compare/nop-vs-springcloud.md" target="_blank" rel=" rel="external nofollow"">在 Gitee 上编辑文档内容</a></div> </div> <section class="Widget Widget--toc"> <div class="Widget-header"> <h2 class="Widget-title">目录</h2> </div> <div class="Widget-body"></div> </section> </footer> </article> <footer class="Page-footer Footer"> <div class="container-fluid"> <div class="Footer-description"> <!-- Important links --> <nav class="Footer-navs"> <ul><li><a href="/projects/nop-entropy/docs/"><span>指南</span></a> </li><li><a href="/community/"><span>社区</span></a> </li></ul> </nav> <!-- Copyright --> <div class="Footer-copyright"> <p>&copy; 2024-2024 <a href="https://nop-platform.gitee.io?utm_source=https://nop-platform.gitee.io&utm_medium=common-footer" target="_blank" rel="external nofollow">Nop 社区</a> 版权所有 </p> <p>本站主题 <a href="https://ourai.github.io/lime/?utm_source=https://nop-platform.gitee.io&utm_medium=common-footer" target="_blank" rel="external nofollow">Lime</a> 由 <a href="https://linxoid.com/ourai/?utm_source=https://nop-platform.gitee.io&utm_medium=common-footer" target="_blank" rel="external nofollow">欧雷</a> 提供</p> </div> </div> </div> </footer> </main> </div> <script>$('table').addClass('table table-bordered')</script> <script type="text/javascript" src="/assets/ksio/vendors/share.min-3155ee636b84a04d036e0f1ba833227d3fd03a4c58a6f2e21c9ceb1c5d0198c7.js"></script><script type="text/javascript" src="/assets/ksio/components-a266f21fe1dfd61bebf40e74872cbf901eb3e201f7d33e9e5d5af9a55f4b24ea.js"></script> <script type="text/javascript" src="/assets/ksio/initializers/time-8d7a529a66ae6cb53c2283d21fd6a12c538b8473dd5bd76458366d09adce7bf6.js"></script><script type="text/javascript" src="/assets/ksio/initializers/lazyload-44b7df8a9282d598284d522e64d6be9ac88d466f3c4a734a514303e99347b2c9.js"></script> </body> </html>
